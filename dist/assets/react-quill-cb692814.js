import{E as ye,r as Is,z as Rs}from"./index-0a09aeff.js";var Mr={exports:{}},ie={exports:{}};/**
 * @license
 * Lo-Dash 2.4.2 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -o ./dist/lodash.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */ie.exports;var tr;function mt(){return tr||(tr=1,function(w,_){(function(){var m,h=[],f=[],p=0,s=+new Date+"",u=75,i=40,t=` 	\v\f \uFEFF
\r\u2028\u2029 ᠎             　`,n=/\b__p \+= '';/g,a=/\b(__p \+=) '' \+/g,l=/(__e\(.*?\)|\b__t\)) \+\n'';/g,o=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,g=/\w*$/,y=/^\s*function[ \n\r\t]+\w/,T=/<%=([\s\S]+?)%>/g,x=RegExp("^["+t+"]*0+(?=.$)"),S=/($^)/,I=/\bthis\b/,O=/['\n\r\t\u2028\u2029\\]/g,U=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],F=0,B="[object Arguments]",rt="[object Array]",Q="[object Boolean]",Z="[object Date]",yt="[object Function]",tt="[object Number]",K="[object Object]",z="[object RegExp]",G="[object String]",V={};V[yt]=!1,V[B]=V[rt]=V[Q]=V[Z]=V[tt]=V[K]=V[z]=V[G]=!0;var et={leading:!1,maxWait:0,trailing:!1},W={configurable:!1,enumerable:!1,value:null,writable:!1},H={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Tt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Gt=H[typeof window]&&window||this,se=_&&!_.nodeType&&_,oe=w&&!w.nodeType&&w,Gr=oe&&oe.exports===se&&se,Ut=H[typeof ye]&&ye;Ut&&(Ut.global===Ut||Ut.window===Ut)&&(Gt=Ut);function Pt(D,P,j){for(var k=(j||0)-1,X=D?D.length:0;++k<X;)if(D[k]===P)return k;return-1}function ue(D,P){var j=typeof P;if(D=D.cache,j=="boolean"||P==null)return D[P]?0:-1;j!="number"&&j!="string"&&(j="object");var k=j=="number"?P:s+P;return D=(D=D[j])&&D[k],j=="object"?D&&Pt(D,P)>-1?0:-1:D?0:-1}function zr(D){var P=this.cache,j=typeof D;if(j=="boolean"||D==null)P[D]=!0;else{j!="number"&&j!="string"&&(j="object");var k=j=="number"?D:s+D,X=P[j]||(P[j]={});j=="object"?(X[k]||(X[k]=[])).push(D):X[k]=!0}}function Cn(D){return D.charCodeAt(0)}function kr(D,P){for(var j=D.criteria,k=P.criteria,X=-1,dt=j.length;++X<dt;){var _t=j[X],it=k[X];if(_t!==it){if(_t>it||typeof _t>"u")return 1;if(_t<it||typeof it>"u")return-1}}return D.index-P.index}function be(D){var P=-1,j=D.length,k=D[0],X=D[j/2|0],dt=D[j-1];if(k&&typeof k=="object"&&X&&typeof X=="object"&&dt&&typeof dt=="object")return!1;var _t=Ee();_t.false=_t.null=_t.true=_t.undefined=!1;var it=Ee();for(it.array=D,it.cache=_t,it.push=zr;++P<j;)it.push(D[P]);return it}function Qr(D){return"\\"+Tt[D]}function xt(){return h.pop()||[]}function Ee(){return f.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function wt(D){D.length=0,h.length<i&&h.push(D)}function zt(D){var P=D.cache;P&&zt(P),D.array=D.cache=D.criteria=D.object=D.number=D.string=D.value=null,f.length<i&&f.push(D)}function Y(D,P,j){P||(P=0),typeof j>"u"&&(j=D?D.length:0);for(var k=-1,X=j-P||0,dt=Array(X<0?0:X);++k<X;)dt[k]=D[P+k];return dt}function Te(D){D=D?Ft.defaults(Gt.Object(),D,Ft.pick(Gt,U)):Gt;var P=D.Array,j=D.Boolean,k=D.Date,X=D.Function,dt=D.Math,_t=D.Number,it=D.Object,kt=D.RegExp,Dt=D.String,St=D.TypeError,Bt=[],An=it.prototype,Vr=D._,lt=An.toString,Yr=kt("^"+Dt(lt).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Xr=dt.ceil,le=D.clearTimeout,Wr=dt.floor,$r=X.prototype.toString,jt=Rt(jt=it.getPrototypeOf)&&jt,at=An.hasOwnProperty,Qt=Bt.push,Vt=D.setTimeout,Sn=Bt.splice,Zr=Bt.unshift,Nn=function(){try{var e={},r=Rt(r=it.defineProperty)&&r,c=r(e,e,e)&&r}catch{}return c}(),ae=Rt(ae=it.create)&&ae,we=Rt(we=P.isArray)&&we,Jr=D.isFinite,ti=D.isNaN,fe=Rt(fe=it.keys)&&fe,Lt=dt.max,Yt=dt.min,Le=D.parseInt,qn=dt.random,Nt={};Nt[rt]=P,Nt[Q]=j,Nt[Z]=k,Nt[yt]=X,Nt[K]=it,Nt[tt]=_t,Nt[z]=kt,Nt[G]=Dt;function E(e){return e&&typeof e=="object"&&!ut(e)&&at.call(e,"__wrapped__")?e:new Ot(e)}function Ot(e,r){this.__chain__=!!r,this.__wrapped__=e}Ot.prototype=E.prototype;var Xt=E.support={};Xt.funcDecomp=!Rt(D.WinRTError)&&I.test(Te),Xt.funcNames=typeof X.name=="string",E.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:T,variable:"",imports:{_:E}};function ei(e){var r=e[0],c=e[2],d=e[4];function v(){if(c){var b=Y(c);Qt.apply(b,arguments)}if(this instanceof v){var L=Wt(r.prototype),C=r.apply(L,b||arguments);return ht(C)?C:L}return r.apply(d,b||arguments)}return Ne(v,e),v}function xe(e,r,c,d,v){if(c){var b=c(e);if(typeof b<"u")return b}var L=ht(e);if(L){var C=lt.call(e);if(!V[C])return e;var A=Nt[C];switch(C){case Q:case Z:return new A(+e);case tt:case G:return new A(e);case z:return b=A(e.source,g.exec(e)),b.lastIndex=e.lastIndex,b}}else return e;var N=ut(e);if(r){var q=!d;d||(d=xt()),v||(v=xt());for(var R=d.length;R--;)if(d[R]==e)return v[R];b=N?A(e.length):{}}else b=N?Y(e):pe({},e);return N&&(at.call(e,"index")&&(b.index=e.index),at.call(e,"input")&&(b.input=e.input)),r&&(d.push(e),v.push(b),(N?ct:J)(e,function(M,nt){b[nt]=xe(M,r,c,d,v)}),q&&(wt(d),wt(v))),b}function Wt(e,r){return ht(e)?ae(e):{}}ae||(Wt=function(){function e(){}return function(r){if(ht(r)){e.prototype=r;var c=new e;e.prototype=null}return c||D.Object()}}());function gt(e,r,c){if(typeof e!="function")return Fe;if(typeof r>"u"||!("prototype"in e))return e;var d=e.__bindData__;if(typeof d>"u"&&(Xt.funcNames&&(d=!e.name),d=d||!Xt.funcDecomp,!d)){var v=$r.call(e);Xt.funcNames||(d=!y.test(v)),d||(d=I.test(v),Ne(e,d))}if(d===!1||d!==!0&&d[1]&1)return e;switch(c){case 1:return function(b){return e.call(r,b)};case 2:return function(b,L){return e.call(r,b,L)};case 3:return function(b,L,C){return e.call(r,b,L,C)};case 4:return function(b,L,C,A){return e.call(r,b,L,C,A)}}return Xn(e,r)}function Dn(e){var r=e[0],c=e[1],d=e[2],v=e[3],b=e[4],L=e[5],C=c&1,A=c&2,N=c&4,q=c&8,R=r;function M(){var nt=C?b:this;if(d){var $=Y(d);Qt.apply($,arguments)}if((v||N)&&($||($=Y(arguments)),v&&Qt.apply($,v),N&&$.length<L))return c|=16,Dn([r,q?c:c&-4,$,null,b,L]);if($||($=arguments),A&&(r=nt[R]),this instanceof M){nt=Wt(r.prototype);var vt=r.apply(nt,$);return ht(vt)?vt:nt}return r.apply(nt,$)}return Ne(M,e),M}function $t(e,r){var c=-1,d=he(),v=e?e.length:0,b=v>=u&&d===Pt,L=[];if(b){var C=be(r);C?(d=ue,r=C):b=!1}for(;++c<v;){var A=e[c];d(r,A)<0&&L.push(A)}return b&&zt(r),L}function It(e,r,c,d){for(var v=(d||0)-1,b=e?e.length:0,L=[];++v<b;){var C=e[v];if(C&&typeof C=="object"&&typeof C.length=="number"&&(ut(C)||ce(C))){r||(C=It(C,r,c));var A=-1,N=C.length,q=L.length;for(L.length+=N;++A<N;)L[q++]=C[A]}else c||L.push(C)}return L}function Kt(e,r,c,d,v,b){if(c){var L=c(e,r);if(typeof L<"u")return!!L}if(e===r)return e!==0||1/e==1/r;var C=typeof e,A=typeof r;if(e===e&&!(e&&H[C])&&!(r&&H[A]))return!1;if(e==null||r==null)return e===r;var N=lt.call(e),q=lt.call(r);if(N==B&&(N=K),q==B&&(q=K),N!=q)return!1;switch(N){case Q:case Z:return+e==+r;case tt:return e!=+e?r!=+r:e==0?1/e==1/r:e==+r;case z:case G:return e==Dt(r)}var R=N==rt;if(!R){var M=at.call(e,"__wrapped__"),nt=at.call(r,"__wrapped__");if(M||nt)return Kt(M?e.__wrapped__:e,nt?r.__wrapped__:r,c,d,v,b);if(N!=K)return!1;var $=e.constructor,vt=r.constructor;if($!=vt&&!(st($)&&$ instanceof $&&st(vt)&&vt instanceof vt)&&"constructor"in e&&"constructor"in r)return!1}var bt=!v;v||(v=xt()),b||(b=xt());for(var pt=v.length;pt--;)if(v[pt]==e)return b[pt]==r;var ot=0;if(L=!0,v.push(e),b.push(r),R){if(pt=e.length,ot=r.length,L=ot==pt,L||d)for(;ot--;){var me=pt,ee=r[ot];if(d)for(;me--&&!(L=Kt(e[me],ee,c,d,v,b)););else if(!(L=Kt(e[ot],ee,c,d,v,b)))break}}else qt(r,function(ne,re,je){if(at.call(je,re))return ot++,L=at.call(e,re)&&Kt(e[re],ne,c,d,v,b)}),L&&!d&&qt(e,function(ne,re,je){if(at.call(je,re))return L=--ot>-1});return v.pop(),b.pop(),bt&&(wt(v),wt(b)),L}function In(e,r,c,d,v){(ut(r)?ct:J)(r,function(b,L){var C,A,N=b,q=e[L];if(b&&((A=ut(b))||Ie(b))){for(var R=d.length;R--;)if(C=d[R]==b){q=v[R];break}if(!C){var M;c&&(N=c(q,b),(M=typeof N<"u")&&(q=N)),M||(q=A?ut(q)?q:[]:Ie(q)?q:{}),d.push(b),v.push(q),M||In(q,b,c,d,v)}}else c&&(N=c(q,b),typeof N>"u"&&(N=b)),typeof N<"u"&&(q=N);e[L]=q})}function Ce(e,r){return e+Wr(qn()*(r-e+1))}function Ae(e,r,c){var d=-1,v=he(),b=e?e.length:0,L=[],C=!r&&b>=u&&v===Pt,A=c||C?xt():L;if(C){var N=be(A);v=ue,A=N}for(;++d<b;){var q=e[d],R=c?c(q,d,e):q;(r?!d||A[A.length-1]!==R:v(A,R)<0)&&((c||C)&&A.push(R),L.push(q))}return C?(wt(A.array),zt(A)):c&&wt(A),L}function Se(e){return function(r,c,d){var v={};c=E.createCallback(c,d,3);var b=-1,L=r?r.length:0;if(typeof L=="number")for(;++b<L;){var C=r[b];e(v,C,c(C,b,r),r)}else J(r,function(A,N,q){e(v,A,c(A,N,q),q)});return v}}function Ct(e,r,c,d,v,b){var L=r&1,C=r&2,A=r&4,N=r&16,q=r&32;if(!C&&!st(e))throw new St;N&&!c.length&&(r&=-17,N=c=!1),q&&!d.length&&(r&=-33,q=d=!1);var R=e&&e.__bindData__;if(R&&R!==!0)return R=Y(R),R[2]&&(R[2]=Y(R[2])),R[3]&&(R[3]=Y(R[3])),L&&!(R[1]&1)&&(R[4]=v),!L&&R[1]&1&&(r|=8),A&&!(R[1]&4)&&(R[5]=b),N&&Qt.apply(R[2]||(R[2]=[]),c),q&&Zr.apply(R[3]||(R[3]=[]),d),R[1]|=r,Ct.apply(null,R);var M=r==1||r===17?ei:Dn;return M([e,r,c,d,v,b])}function ni(e){return qe[e]}function he(){var e=(e=E.indexOf)===zn?Pt:e;return e}function Rt(e){return typeof e=="function"&&Yr.test(e)}var Ne=Nn?function(e,r){W.value=r,Nn(e,"__bindData__",W),W.value=null}:$n;function Rn(e){var r,c;return!(e&&lt.call(e)==K)||(r=e.constructor,st(r)&&!(r instanceof r))?!1:(qt(e,function(d,v){c=v}),typeof c>"u"||at.call(e,c))}function ri(e){return On[e]}function ce(e){return e&&typeof e=="object"&&typeof e.length=="number"&&lt.call(e)==B||!1}var ut=we||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&lt.call(e)==rt||!1},ii=function(e){var r,c=e,d=[];if(!c||!H[typeof e])return d;for(r in c)at.call(c,r)&&d.push(r);return d},ft=fe?function(e){return ht(e)?fe(e):[]}:ii,qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},On=Un(qe),si=kt("("+ft(On).join("|")+")","g"),oi=kt("["+ft(qe).join("")+"]","g"),pe=function(e,r,c){var d,v=e,b=v;if(!v)return b;var L=arguments,C=0,A=typeof c=="number"?2:L.length;if(A>3&&typeof L[A-2]=="function")var N=gt(L[--A-1],L[A--],2);else A>2&&typeof L[A-1]=="function"&&(N=L[--A]);for(;++C<A;)if(v=L[C],v&&H[typeof v])for(var q=-1,R=H[typeof v]&&ft(v),M=R?R.length:0;++q<M;)d=R[q],b[d]=N?N(b[d],v[d]):v[d];return b};function ui(e,r,c,d){return typeof r!="boolean"&&r!=null&&(d=c,c=r,r=!1),xe(e,r,typeof c=="function"&&gt(c,d,1))}function li(e,r,c){return xe(e,!0,typeof r=="function"&&gt(r,c,1))}function ai(e,r){var c=Wt(e);return r?pe(c,r):c}var De=function(e,r,c){var d,v=e,b=v;if(!v)return b;for(var L=arguments,C=0,A=typeof c=="number"?2:L.length;++C<A;)if(v=L[C],v&&H[typeof v])for(var N=-1,q=H[typeof v]&&ft(v),R=q?q.length:0;++N<R;)d=q[N],typeof b[d]>"u"&&(b[d]=v[d]);return b};function fi(e,r,c){var d;return r=E.createCallback(r,c,3),J(e,function(v,b,L){if(r(v,b,L))return d=b,!1}),d}function hi(e,r,c){var d;return r=E.createCallback(r,c,3),Mn(e,function(v,b,L){if(r(v,b,L))return d=b,!1}),d}var qt=function(e,r,c){var d,v=e,b=v;if(!v||!H[typeof v])return b;r=r&&typeof c>"u"?r:gt(r,c,3);for(d in v)if(r(v[d],d,e)===!1)return b;return b};function ci(e,r,c){var d=[];qt(e,function(b,L){d.push(L,b)});var v=d.length;for(r=gt(r,c,3);v--&&r(d[v--],d[v],e)!==!1;);return e}var J=function(e,r,c){var d,v=e,b=v;if(!v||!H[typeof v])return b;r=r&&typeof c>"u"?r:gt(r,c,3);for(var L=-1,C=H[typeof v]&&ft(v),A=C?C.length:0;++L<A;)if(d=C[L],r(v[d],d,e)===!1)return b;return b};function Mn(e,r,c){var d=ft(e),v=d.length;for(r=gt(r,c,3);v--;){var b=d[v];if(r(e[b],b,e)===!1)break}return e}function Zt(e){var r=[];return qt(e,function(c,d){st(c)&&r.push(d)}),r.sort()}function pi(e,r){return e?at.call(e,r):!1}function Un(e){for(var r=-1,c=ft(e),d=c.length,v={};++r<d;){var b=c[r];v[e[b]]=b}return v}function di(e){return e===!0||e===!1||e&&typeof e=="object"&&lt.call(e)==Q||!1}function gi(e){return e&&typeof e=="object"&&lt.call(e)==Z||!1}function vi(e){return e&&e.nodeType===1||!1}function mi(e){var r=!0;if(!e)return r;var c=lt.call(e),d=e.length;return c==rt||c==G||c==B||c==K&&typeof d=="number"&&st(e.splice)?!d:(J(e,function(){return r=!1}),r)}function yi(e,r,c,d){return Kt(e,r,typeof c=="function"&&gt(c,d,2))}function _i(e){return Jr(e)&&!ti(parseFloat(e))}function st(e){return typeof e=="function"}function ht(e){return!!(e&&H[typeof e])}function bi(e){return Pn(e)&&e!=+e}function Ei(e){return e===null}function Pn(e){return typeof e=="number"||e&&typeof e=="object"&&lt.call(e)==tt||!1}var Ie=jt?function(e){if(!(e&&lt.call(e)==K))return!1;var r=e.valueOf,c=Rt(r)&&(c=jt(r))&&jt(c);return c?e==c||jt(e)==c:Rn(e)}:Rn;function Ti(e){return e&&typeof e=="object"&&lt.call(e)==z||!1}function Jt(e){return typeof e=="string"||e&&typeof e=="object"&&lt.call(e)==G||!1}function wi(e){return typeof e>"u"}function Li(e,r,c){var d={};return r=E.createCallback(r,c,3),J(e,function(v,b,L){d[b]=r(v,b,L)}),d}function xi(e){var r=arguments,c=2;if(!ht(e))return e;if(typeof r[2]!="number"&&(c=r.length),c>3&&typeof r[c-2]=="function")var d=gt(r[--c-1],r[c--],2);else c>2&&typeof r[c-1]=="function"&&(d=r[--c]);for(var v=Y(arguments,1,c),b=-1,L=xt(),C=xt();++b<c;)In(e,v[b],d,L,C);return wt(L),wt(C),e}function Ci(e,r,c){var d={};if(typeof r!="function"){var v=[];qt(e,function(A,N){v.push(N)}),v=$t(v,It(arguments,!0,!1,1));for(var b=-1,L=v.length;++b<L;){var C=v[b];d[C]=e[C]}}else r=E.createCallback(r,c,3),qt(e,function(A,N,q){r(A,N,q)||(d[N]=A)});return d}function Ai(e){for(var r=-1,c=ft(e),d=c.length,v=P(d);++r<d;){var b=c[r];v[r]=[b,e[b]]}return v}function Si(e,r,c){var d={};if(typeof r!="function")for(var v=-1,b=It(arguments,!0,!1,1),L=ht(e)?b.length:0;++v<L;){var C=b[v];C in e&&(d[C]=e[C])}else r=E.createCallback(r,c,3),qt(e,function(A,N,q){r(A,N,q)&&(d[N]=A)});return d}function Ni(e,r,c,d){var v=ut(e);if(c==null)if(v)c=[];else{var b=e&&e.constructor,L=b&&b.prototype;c=Wt(L)}return r&&(r=E.createCallback(r,d,4),(v?ct:J)(e,function(C,A,N){return r(c,C,A,N)})),c}function de(e){for(var r=-1,c=ft(e),d=c.length,v=P(d);++r<d;)v[r]=e[c[r]];return v}function qi(e){for(var r=arguments,c=-1,d=It(r,!0,!1,1),v=r[2]&&r[2][r[1]]===e?1:d.length,b=P(v);++c<v;)b[c]=e[d[c]];return b}function Fn(e,r,c){var d=-1,v=he(),b=e?e.length:0,L=!1;return c=(c<0?Lt(0,b+c):c)||0,ut(e)?L=v(e,r,c)>-1:typeof b=="number"?L=(Jt(e)?e.indexOf(r,c):v(e,r,c))>-1:J(e,function(C){if(++d>=c)return!(L=C===r)}),L}var Di=Se(function(e,r,c){at.call(e,c)?e[c]++:e[c]=1});function Bn(e,r,c){var d=!0;r=E.createCallback(r,c,3);var v=-1,b=e?e.length:0;if(typeof b=="number")for(;++v<b&&(d=!!r(e[v],v,e)););else J(e,function(L,C,A){return d=!!r(L,C,A)});return d}function ge(e,r,c){var d=[];r=E.createCallback(r,c,3);var v=-1,b=e?e.length:0;if(typeof b=="number")for(;++v<b;){var L=e[v];r(L,v,e)&&d.push(L)}else J(e,function(C,A,N){r(C,A,N)&&d.push(C)});return d}function Re(e,r,c){r=E.createCallback(r,c,3);var d=-1,v=e?e.length:0;if(typeof v=="number")for(;++d<v;){var b=e[d];if(r(b,d,e))return b}else{var L;return J(e,function(C,A,N){if(r(C,A,N))return L=C,!1}),L}}function Ii(e,r,c){var d;return r=E.createCallback(r,c,3),ve(e,function(v,b,L){if(r(v,b,L))return d=v,!1}),d}function ct(e,r,c){var d=-1,v=e?e.length:0;if(r=r&&typeof c>"u"?r:gt(r,c,3),typeof v=="number")for(;++d<v&&r(e[d],d,e)!==!1;);else J(e,r);return e}function ve(e,r,c){var d=e?e.length:0;if(r=r&&typeof c>"u"?r:gt(r,c,3),typeof d=="number")for(;d--&&r(e[d],d,e)!==!1;);else{var v=ft(e);d=v.length,J(e,function(b,L,C){return L=v?v[--d]:--d,r(C[L],L,C)})}return e}var Ri=Se(function(e,r,c){(at.call(e,c)?e[c]:e[c]=[]).push(r)}),Oi=Se(function(e,r,c){e[c]=r});function Mi(e,r){var c=Y(arguments,2),d=-1,v=typeof r=="function",b=e?e.length:0,L=P(typeof b=="number"?b:0);return ct(e,function(C){L[++d]=(v?r:C[r]).apply(C,c)}),L}function te(e,r,c){var d=-1,v=e?e.length:0;if(r=E.createCallback(r,c,3),typeof v=="number")for(var b=P(v);++d<v;)b[d]=r(e[d],d,e);else b=[],J(e,function(L,C,A){b[++d]=r(L,C,A)});return b}function jn(e,r,c){var d=-1/0,v=d;if(typeof r!="function"&&c&&c[r]===e&&(r=null),r==null&&ut(e))for(var b=-1,L=e.length;++b<L;){var C=e[b];C>v&&(v=C)}else r=r==null&&Jt(e)?Cn:E.createCallback(r,c,3),ct(e,function(A,N,q){var R=r(A,N,q);R>d&&(d=R,v=A)});return v}function Ui(e,r,c){var d=1/0,v=d;if(typeof r!="function"&&c&&c[r]===e&&(r=null),r==null&&ut(e))for(var b=-1,L=e.length;++b<L;){var C=e[b];C<v&&(v=C)}else r=r==null&&Jt(e)?Cn:E.createCallback(r,c,3),ct(e,function(A,N,q){var R=r(A,N,q);R<d&&(d=R,v=A)});return v}var Oe=te;function Me(e,r,c,d){if(!e)return c;var v=arguments.length<3;r=E.createCallback(r,d,4);var b=-1,L=e.length;if(typeof L=="number")for(v&&(c=e[++b]);++b<L;)c=r(c,e[b],b,e);else J(e,function(C,A,N){c=v?(v=!1,C):r(c,C,A,N)});return c}function Kn(e,r,c,d){var v=arguments.length<3;return r=E.createCallback(r,d,4),ve(e,function(b,L,C){c=v?(v=!1,b):r(c,b,L,C)}),c}function Pi(e,r,c){return r=E.createCallback(r,c,3),ge(e,function(d,v,b){return!r(d,v,b)})}function Fi(e,r,c){if(e&&typeof e.length!="number"&&(e=de(e)),r==null||c)return e?e[Ce(0,e.length-1)]:m;var d=Hn(e);return d.length=Yt(Lt(0,r),d.length),d}function Hn(e){var r=-1,c=e?e.length:0,d=P(typeof c=="number"?c:0);return ct(e,function(v){var b=Ce(0,++r);d[r]=d[b],d[b]=v}),d}function Bi(e){var r=e?e.length:0;return typeof r=="number"?r:ft(e).length}function Gn(e,r,c){var d;r=E.createCallback(r,c,3);var v=-1,b=e?e.length:0;if(typeof b=="number")for(;++v<b&&!(d=r(e[v],v,e)););else J(e,function(L,C,A){return!(d=r(L,C,A))});return!!d}function ji(e,r,c){var d=-1,v=ut(r),b=e?e.length:0,L=P(typeof b=="number"?b:0);for(v||(r=E.createCallback(r,c,3)),ct(e,function(A,N,q){var R=L[++d]=Ee();v?R.criteria=te(r,function(M){return A[M]}):(R.criteria=xt())[0]=r(A,N,q),R.index=d,R.value=A}),b=L.length,L.sort(kr);b--;){var C=L[b];L[b]=C.value,v||wt(C.criteria),zt(C)}return L}function Ki(e){return e&&typeof e.length=="number"?Y(e):de(e)}var Hi=ge;function Gi(e){for(var r=-1,c=e?e.length:0,d=[];++r<c;){var v=e[r];v&&d.push(v)}return d}function zi(e){return $t(e,It(arguments,!0,!0,1))}function ki(e,r,c){var d=-1,v=e?e.length:0;for(r=E.createCallback(r,c,3);++d<v;)if(r(e[d],d,e))return d;return-1}function Qi(e,r,c){var d=e?e.length:0;for(r=E.createCallback(r,c,3);d--;)if(r(e[d],d,e))return d;return-1}function Ue(e,r,c){var d=0,v=e?e.length:0;if(typeof r!="number"&&r!=null){var b=-1;for(r=E.createCallback(r,c,3);++b<v&&r(e[b],b,e);)d++}else if(d=r,d==null||c)return e?e[0]:m;return Y(e,0,Yt(Lt(0,d),v))}function Vi(e,r,c,d){return typeof r!="boolean"&&r!=null&&(d=c,c=typeof r!="function"&&d&&d[r]===e?null:r,r=!1),c!=null&&(e=te(e,c,d)),It(e,r)}function zn(e,r,c){if(typeof c=="number"){var d=e?e.length:0;c=c<0?Lt(0,d+c):c||0}else if(c){var v=kn(e,r);return e[v]===r?v:-1}return Pt(e,r,c)}function Yi(e,r,c){var d=0,v=e?e.length:0;if(typeof r!="number"&&r!=null){var b=v;for(r=E.createCallback(r,c,3);b--&&r(e[b],b,e);)d++}else d=r==null||c?1:r||d;return Y(e,0,Yt(Lt(0,v-d),v))}function Xi(){for(var e=[],r=-1,c=arguments.length,d=xt(),v=he(),b=v===Pt,L=xt();++r<c;){var C=arguments[r];(ut(C)||ce(C))&&(e.push(C),d.push(b&&C.length>=u&&be(r?e[r]:L)))}var A=e[0],N=-1,q=A?A.length:0,R=[];t:for(;++N<q;){var M=d[0];if(C=A[N],(M?ue(M,C):v(L,C))<0){for(r=c,(M||L).push(C);--r;)if(M=d[r],(M?ue(M,C):v(e[r],C))<0)continue t;R.push(C)}}for(;c--;)M=d[c],M&&zt(M);return wt(d),wt(L),R}function Wi(e,r,c){var d=0,v=e?e.length:0;if(typeof r!="number"&&r!=null){var b=v;for(r=E.createCallback(r,c,3);b--&&r(e[b],b,e);)d++}else if(d=r,d==null||c)return e?e[v-1]:m;return Y(e,Lt(0,v-d))}function $i(e,r,c){var d=e?e.length:0;for(typeof c=="number"&&(d=(c<0?Lt(0,d+c):Yt(c,d-1))+1);d--;)if(e[d]===r)return d;return-1}function Zi(e){for(var r=arguments,c=0,d=r.length,v=e?e.length:0;++c<d;)for(var b=-1,L=r[c];++b<v;)e[b]===L&&(Sn.call(e,b--,1),v--);return e}function Ji(e,r,c){e=+e||0,c=typeof c=="number"?c:+c||1,r==null&&(r=e,e=0);for(var d=-1,v=Lt(0,Xr((r-e)/(c||1))),b=P(v);++d<v;)b[d]=e,e+=c;return b}function ts(e,r,c){var d=-1,v=e?e.length:0,b=[];for(r=E.createCallback(r,c,3);++d<v;){var L=e[d];r(L,d,e)&&(b.push(L),Sn.call(e,d--,1),v--)}return b}function Pe(e,r,c){if(typeof r!="number"&&r!=null){var d=0,v=-1,b=e?e.length:0;for(r=E.createCallback(r,c,3);++v<b&&r(e[v],v,e);)d++}else d=r==null||c?1:Lt(0,r);return Y(e,d)}function kn(e,r,c,d){var v=0,b=e?e.length:v;for(c=c?E.createCallback(c,d,1):Fe,r=c(r);v<b;){var L=v+b>>>1;c(e[L])<r?v=L+1:b=L}return v}function es(){return Ae(It(arguments,!0,!0))}function Qn(e,r,c,d){return typeof r!="boolean"&&r!=null&&(d=c,c=typeof r!="function"&&d&&d[r]===e?null:r,r=!1),c!=null&&(c=E.createCallback(c,d,3)),Ae(e,r,c)}function ns(e){return $t(e,Y(arguments,1))}function rs(){for(var e=-1,r=arguments.length;++e<r;){var c=arguments[e];if(ut(c)||ce(c))var d=d?Ae($t(d,c).concat($t(c,d))):c}return d||[]}function Vn(){for(var e=arguments.length>1?arguments:arguments[0],r=-1,c=e?jn(Oe(e,"length")):0,d=P(c<0?0:c);++r<c;)d[r]=Oe(e,r);return d}function Yn(e,r){var c=-1,d=e?e.length:0,v={};for(!r&&d&&!ut(e[0])&&(r=[]);++c<d;){var b=e[c];r?v[b]=r[c]:b&&(v[b[0]]=b[1])}return v}function is(e,r){if(!st(r))throw new St;return function(){if(--e<1)return r.apply(this,arguments)}}function Xn(e,r){return arguments.length>2?Ct(e,17,Y(arguments,2),null,r):Ct(e,1,null,null,r)}function ss(e){for(var r=arguments.length>1?It(arguments,!0,!1,1):Zt(e),c=-1,d=r.length;++c<d;){var v=r[c];e[v]=Ct(e[v],1,null,null,e)}return e}function os(e,r){return arguments.length>2?Ct(r,19,Y(arguments,2),null,e):Ct(r,3,null,null,e)}function us(){for(var e=arguments,r=e.length;r--;)if(!st(e[r]))throw new St;return function(){for(var c=arguments,d=e.length;d--;)c=[e[d].apply(this,c)];return c[0]}}function ls(e,r){return r=typeof r=="number"?r:+r||e.length,Ct(e,4,null,null,null,r)}function Wn(e,r,c){var d,v,b,L,C,A,N,q=0,R=!1,M=!0;if(!st(e))throw new St;if(r=Lt(0,r)||0,c===!0){var nt=!0;M=!1}else ht(c)&&(nt=c.leading,R="maxWait"in c&&(Lt(r,c.maxWait)||0),M="trailing"in c?c.trailing:M);var $=function(){var bt=r-(Mt()-L);if(bt<=0){v&&le(v);var pt=N;v=A=N=m,pt&&(q=Mt(),b=e.apply(C,d),!A&&!v&&(d=C=null))}else A=Vt($,bt)},vt=function(){A&&le(A),v=A=N=m,(M||R!==r)&&(q=Mt(),b=e.apply(C,d),!A&&!v&&(d=C=null))};return function(){if(d=arguments,L=Mt(),C=this,N=M&&(A||!nt),R===!1)var bt=nt&&!A;else{!v&&!nt&&(q=L);var pt=R-(L-q),ot=pt<=0;ot?(v&&(v=le(v)),q=L,b=e.apply(C,d)):v||(v=Vt(vt,pt))}return ot&&A?A=le(A):!A&&r!==R&&(A=Vt($,r)),bt&&(ot=!0,b=e.apply(C,d)),ot&&!A&&!v&&(d=C=null),b}}function as(e){if(!st(e))throw new St;var r=Y(arguments,1);return Vt(function(){e.apply(m,r)},1)}function fs(e,r){if(!st(e))throw new St;var c=Y(arguments,2);return Vt(function(){e.apply(m,c)},r)}function hs(e,r){if(!st(e))throw new St;var c=function(){var d=c.cache,v=r?r.apply(this,arguments):s+arguments[0];return at.call(d,v)?d[v]:d[v]=e.apply(this,arguments)};return c.cache={},c}function cs(e){var r,c;if(!st(e))throw new St;return function(){return r||(r=!0,c=e.apply(this,arguments),e=null),c}}function ps(e){return Ct(e,16,Y(arguments,1))}function ds(e){return Ct(e,32,null,Y(arguments,1))}function gs(e,r,c){var d=!0,v=!0;if(!st(e))throw new St;return c===!1?d=!1:ht(c)&&(d="leading"in c?c.leading:d,v="trailing"in c?c.trailing:v),et.leading=d,et.maxWait=r,et.trailing=v,Wn(e,r,et)}function vs(e,r){return Ct(r,16,[e])}function ms(e){return function(){return e}}function ys(e,r,c){var d=typeof e;if(e==null||d=="function")return gt(e,r,c);if(d!="object")return Zn(e);var v=ft(e),b=v[0],L=e[b];return v.length==1&&L===L&&!ht(L)?function(C){var A=C[b];return L===A&&(L!==0||1/L==1/A)}:function(C){for(var A=v.length,N=!1;A--&&(N=Kt(C[v[A]],e[v[A]],null,!0)););return N}}function _s(e){return e==null?"":Dt(e).replace(oi,ni)}function Fe(e){return e}function Be(e,r,c){var d=!0,v=r&&Zt(r);(!r||!c&&!v.length)&&(c==null&&(c=r),b=Ot,r=e,e=E,v=Zt(r)),c===!1?d=!1:ht(c)&&"chain"in c&&(d=c.chain);var b=e,L=st(b);ct(v,function(C){var A=e[C]=r[C];L&&(b.prototype[C]=function(){var N=this.__chain__,q=this.__wrapped__,R=[q];Qt.apply(R,arguments);var M=A.apply(e,R);if(d||N){if(q===M&&ht(M))return this;M=new b(M),M.__chain__=N}return M})})}function bs(){return D._=Vr,this}function $n(){}var Mt=Rt(Mt=k.now)&&Mt||function(){return new k().getTime()},Es=Le(t+"08")==8?Le:function(e,r){return Le(Jt(e)?e.replace(x,""):e,r||0)};function Zn(e){return function(r){return r[e]}}function Ts(e,r,c){var d=e==null,v=r==null;if(c==null&&(typeof e=="boolean"&&v?(c=e,e=1):!v&&typeof r=="boolean"&&(c=r,v=!0)),d&&v&&(r=1),e=+e||0,v?(r=e,e=0):r=+r||0,c||e%1||r%1){var b=qn();return Yt(e+b*(r-e+parseFloat("1e-"+((b+"").length-1))),r)}return Ce(e,r)}function ws(e,r){if(e){var c=e[r];return st(c)?e[r]():c}}function Ls(e,r,c){var d=E.templateSettings;e=Dt(e||""),c=De({},c,d);var v=De({},c.imports,d.imports),b=ft(v),L=de(v),C,A=0,N=c.interpolate||S,q="__p += '",R=kt((c.escape||S).source+"|"+N.source+"|"+(N===T?o:S).source+"|"+(c.evaluate||S).source+"|$","g");e.replace(R,function(bt,pt,ot,me,ee,ne){return ot||(ot=me),q+=e.slice(A,ne).replace(O,Qr),pt&&(q+=`' +
__e(`+pt+`) +
'`),ee&&(C=!0,q+=`';
`+ee+`;
__p += '`),ot&&(q+=`' +
((__t = (`+ot+`)) == null ? '' : __t) +
'`),A=ne+bt.length,bt}),q+=`';
`;var M=c.variable,nt=M;nt||(M="obj",q="with ("+M+`) {
`+q+`
}
`),q=(C?q.replace(n,""):q).replace(a,"$1").replace(l,"$1;"),q="function("+M+`) {
`+(nt?"":M+" || ("+M+` = {});
`)+"var __t, __p = '', __e = _.escape"+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+q+`return __p
}`;var $=`
/*
//# sourceURL=`+(c.sourceURL||"/lodash/template/source["+F+++"]")+`
*/`;try{var vt=X(b,"return "+q+$).apply(m,L)}catch(bt){throw bt.source=q,bt}return r?vt(r):(vt.source=q,vt)}function xs(e,r,c){e=(e=+e)>-1?e:0;var d=-1,v=P(e);for(r=gt(r,c,1);++d<e;)v[d]=r(d);return v}function Cs(e){return e==null?"":Dt(e).replace(si,ri)}function As(e){var r=++p;return Dt(e??"")+r}function Ss(e){return e=new Ot(e),e.__chain__=!0,e}function Ns(e,r){return r(e),e}function qs(){return this.__chain__=!0,this}function Ds(){return Dt(this.__wrapped__)}function Jn(){return this.__wrapped__}return E.after=is,E.assign=pe,E.at=qi,E.bind=Xn,E.bindAll=ss,E.bindKey=os,E.chain=Ss,E.compact=Gi,E.compose=us,E.constant=ms,E.countBy=Di,E.create=ai,E.createCallback=ys,E.curry=ls,E.debounce=Wn,E.defaults=De,E.defer=as,E.delay=fs,E.difference=zi,E.filter=ge,E.flatten=Vi,E.forEach=ct,E.forEachRight=ve,E.forIn=qt,E.forInRight=ci,E.forOwn=J,E.forOwnRight=Mn,E.functions=Zt,E.groupBy=Ri,E.indexBy=Oi,E.initial=Yi,E.intersection=Xi,E.invert=Un,E.invoke=Mi,E.keys=ft,E.map=te,E.mapValues=Li,E.max=jn,E.memoize=hs,E.merge=xi,E.min=Ui,E.omit=Ci,E.once=cs,E.pairs=Ai,E.partial=ps,E.partialRight=ds,E.pick=Si,E.pluck=Oe,E.property=Zn,E.pull=Zi,E.range=Ji,E.reject=Pi,E.remove=ts,E.rest=Pe,E.shuffle=Hn,E.sortBy=ji,E.tap=Ns,E.throttle=gs,E.times=xs,E.toArray=Ki,E.transform=Ni,E.union=es,E.uniq=Qn,E.values=de,E.where=Hi,E.without=ns,E.wrap=vs,E.xor=rs,E.zip=Vn,E.zipObject=Yn,E.collect=te,E.drop=Pe,E.each=ct,E.eachRight=ve,E.extend=pe,E.methods=Zt,E.object=Yn,E.select=ge,E.tail=Pe,E.unique=Qn,E.unzip=Vn,Be(E),E.clone=ui,E.cloneDeep=li,E.contains=Fn,E.escape=_s,E.every=Bn,E.find=Re,E.findIndex=ki,E.findKey=fi,E.findLast=Ii,E.findLastIndex=Qi,E.findLastKey=hi,E.has=pi,E.identity=Fe,E.indexOf=zn,E.isArguments=ce,E.isArray=ut,E.isBoolean=di,E.isDate=gi,E.isElement=vi,E.isEmpty=mi,E.isEqual=yi,E.isFinite=_i,E.isFunction=st,E.isNaN=bi,E.isNull=Ei,E.isNumber=Pn,E.isObject=ht,E.isPlainObject=Ie,E.isRegExp=Ti,E.isString=Jt,E.isUndefined=wi,E.lastIndexOf=$i,E.mixin=Be,E.noConflict=bs,E.noop=$n,E.now=Mt,E.parseInt=Es,E.random=Ts,E.reduce=Me,E.reduceRight=Kn,E.result=ws,E.runInContext=Te,E.size=Bi,E.some=Gn,E.sortedIndex=kn,E.template=Ls,E.unescape=Cs,E.uniqueId=As,E.all=Bn,E.any=Gn,E.detect=Re,E.findWhere=Re,E.foldl=Me,E.foldr=Kn,E.include=Fn,E.inject=Me,Be(function(){var e={};return J(E,function(r,c){E.prototype[c]||(e[c]=r)}),e}(),!1),E.first=Ue,E.last=Wi,E.sample=Fi,E.take=Ue,E.head=Ue,J(E,function(e,r){var c=r!=="sample";E.prototype[r]||(E.prototype[r]=function(d,v){var b=this.__chain__,L=e(this.__wrapped__,d,v);return!b&&(d==null||v&&!(c&&typeof d=="function"))?L:new Ot(L,b)})}),E.VERSION="2.4.2",E.prototype.chain=qs,E.prototype.toString=Ds,E.prototype.value=Jn,E.prototype.valueOf=Jn,ct(["join","pop","shift"],function(e){var r=Bt[e];E.prototype[e]=function(){var c=this.__chain__,d=r.apply(this.__wrapped__,arguments);return c?new Ot(d,c):d}}),ct(["push","reverse","sort","unshift"],function(e){var r=Bt[e];E.prototype[e]=function(){return r.apply(this.__wrapped__,arguments),this}}),ct(["concat","slice","splice"],function(e){var r=Bt[e];E.prototype[e]=function(){return new Ot(r.apply(this.__wrapped__,arguments),this.__chain__)}}),E}var Ft=Te();se&&oe?Gr?(oe.exports=Ft)._=Ft:se._=Ft:Gt._=Ft}).call(ye)}(ie,ie.exports)),ie.exports}const Os="quilljs",Ms="0.18.1",Us="Cross browser rich text editor",Ps="Jason Chen <jhchen7@gmail.com>",Fs="http://quilljs.com",Bs=["Byron Milligan <byronner@gmail.com>","Keegan Poppen <keegan.poppen@gmail.com>"],js="index.js",Ks={eventemitter2:"~0.4.13",lodash:"~2.4.1","rich-text":"~1.0.2"},Hs={async:"~0.9.0","coffee-script":"~1.8.0",coffeeify:"~0.7.0",glob:"~4.0.4",grunt:"~0.4.3","grunt-browserify":"~2.1.0","grunt-contrib-clean":"~0.6.0","grunt-contrib-coffee":"~0.12.0","grunt-contrib-compress":"~0.12.0","grunt-contrib-concat":"~0.5.0","grunt-contrib-connect":"~0.8.0","grunt-contrib-copy":"~0.7.0","grunt-contrib-stylus":"~0.18.0","grunt-contrib-uglify":"~0.6.0","grunt-karma":"~0.9.0","grunt-lodash":"~0.3.0","grunt-protractor-runner":"~1.1.0","grunt-sauce-connect-launcher":"~0.3.0",harp:"~0.14.0",istanbul:"~0.3.0",jquery:"~2.1.1",karma:"~0.12.0","karma-chrome-launcher":"~0.1.2","karma-coffee-preprocessor":"~0.2.1","karma-coverage":"~0.2.0","karma-firefox-launcher":"~0.1.3","karma-html2js-preprocessor":"~0.1.0","karma-jasmine":"~0.2.0","karma-phantomjs-launcher":"~0.1.2","karma-safari-launcher":"~0.1.1","karma-sauce-launcher":"~0.2.2","load-grunt-tasks":"~0.6.0",protractor:"~1.3.1",stylus:"~0.49.2",watchify:"~0.10.2"},Gs={node:">=0.10"},zs="BSD-3-Clause",ks={type:"git",url:"https://github.com/quilljs/quill"},Qs={url:"https://github.com/quilljs/quill/issues"},Vs={prepublish:"grunt coffee:quill",postpublish:"grunt clean:coffee",test:"grunt test"},Ys=["editor","rich text","wysiwyg"],Xs={name:Os,version:Ms,description:Us,author:Ps,homepage:Fs,contributors:Bs,main:js,dependencies:Ks,devDependencies:Hs,engines:Gs,license:zs,repository:ks,bugs:Qs,scripts:Vs,keywords:Ys};var Ke,er;function Ws(){if(er)return Ke;er=1;var w=-1,_=1,m=0;function h(l,o){if(l==o)return l?[[m,l]]:[];var g=u(l,o),y=l.substring(0,g);l=l.substring(g),o=o.substring(g),g=i(l,o);var T=l.substring(l.length-g);l=l.substring(0,l.length-g),o=o.substring(0,o.length-g);var x=f(l,o);return y&&x.unshift([m,y]),T&&x.push([m,T]),n(x),x}function f(l,o){var g;if(!l)return[[_,o]];if(!o)return[[w,l]];var y=l.length>o.length?l:o,T=l.length>o.length?o:l,x=y.indexOf(T);if(x!=-1)return g=[[_,y.substring(0,x)],[m,T],[_,y.substring(x+T.length)]],l.length>o.length&&(g[0][0]=g[2][0]=w),g;if(T.length==1)return[[w,l],[_,o]];var S=t(l,o);if(S){var I=S[0],O=S[1],U=S[2],F=S[3],B=S[4],rt=h(I,U),Q=h(O,F);return rt.concat([[m,B]],Q)}return p(l,o)}function p(l,o){for(var g=l.length,y=o.length,T=Math.ceil((g+y)/2),x=T,S=2*T,I=new Array(S),O=new Array(S),U=0;U<S;U++)I[U]=-1,O[U]=-1;I[x+1]=0,O[x+1]=0;for(var F=g-y,B=F%2!=0,rt=0,Q=0,Z=0,yt=0,tt=0;tt<T;tt++){for(var K=-tt+rt;K<=tt-Q;K+=2){var z=x+K,G;K==-tt||K!=tt&&I[z-1]<I[z+1]?G=I[z+1]:G=I[z-1]+1;for(var V=G-K;G<g&&V<y&&l.charAt(G)==o.charAt(V);)G++,V++;if(I[z]=G,G>g)Q+=2;else if(V>y)rt+=2;else if(B){var et=x+F-K;if(et>=0&&et<S&&O[et]!=-1){var W=g-O[et];if(G>=W)return s(l,o,G,V)}}}for(var H=-tt+Z;H<=tt-yt;H+=2){var et=x+H,W;H==-tt||H!=tt&&O[et-1]<O[et+1]?W=O[et+1]:W=O[et-1]+1;for(var Tt=W-H;W<g&&Tt<y&&l.charAt(g-W-1)==o.charAt(y-Tt-1);)W++,Tt++;if(O[et]=W,W>g)yt+=2;else if(Tt>y)Z+=2;else if(!B){var z=x+F-H;if(z>=0&&z<S&&I[z]!=-1){var G=I[z],V=x+G-z;if(W=g-W,G>=W)return s(l,o,G,V)}}}}return[[w,l],[_,o]]}function s(l,o,g,y){var T=l.substring(0,g),x=o.substring(0,y),S=l.substring(g),I=o.substring(y),O=h(T,x),U=h(S,I);return O.concat(U)}function u(l,o){if(!l||!o||l.charAt(0)!=o.charAt(0))return 0;for(var g=0,y=Math.min(l.length,o.length),T=y,x=0;g<T;)l.substring(x,T)==o.substring(x,T)?(g=T,x=g):y=T,T=Math.floor((y-g)/2+g);return T}function i(l,o){if(!l||!o||l.charAt(l.length-1)!=o.charAt(o.length-1))return 0;for(var g=0,y=Math.min(l.length,o.length),T=y,x=0;g<T;)l.substring(l.length-T,l.length-x)==o.substring(o.length-T,o.length-x)?(g=T,x=g):y=T,T=Math.floor((y-g)/2+g);return T}function t(l,o){var g=l.length>o.length?l:o,y=l.length>o.length?o:l;if(g.length<4||y.length*2<g.length)return null;function T(Q,Z,yt){for(var tt=Q.substring(yt,yt+Math.floor(Q.length/4)),K=-1,z="",G,V,et,W;(K=Z.indexOf(tt,K+1))!=-1;){var H=u(Q.substring(yt),Z.substring(K)),Tt=i(Q.substring(0,yt),Z.substring(0,K));z.length<Tt+H&&(z=Z.substring(K-Tt,K)+Z.substring(K,K+H),G=Q.substring(0,yt-Tt),V=Q.substring(yt+H),et=Z.substring(0,K-Tt),W=Z.substring(K+H))}return z.length*2>=Q.length?[G,V,et,W,z]:null}var x=T(g,y,Math.ceil(g.length/4)),S=T(g,y,Math.ceil(g.length/2)),I;if(!x&&!S)return null;S?x?I=x[4].length>S[4].length?x:S:I=S:I=x;var O,U,F,B;l.length>o.length?(O=I[0],U=I[1],F=I[2],B=I[3]):(F=I[0],B=I[1],O=I[2],U=I[3]);var rt=I[4];return[O,U,F,B,rt]}function n(l){l.push([m,""]);for(var o=0,g=0,y=0,T="",x="",S;o<l.length;)switch(l[o][0]){case _:y++,x+=l[o][1],o++;break;case w:g++,T+=l[o][1],o++;break;case m:g+y>1?(g!==0&&y!==0&&(S=u(x,T),S!==0&&(o-g-y>0&&l[o-g-y-1][0]==m?l[o-g-y-1][1]+=x.substring(0,S):(l.splice(0,0,[m,x.substring(0,S)]),o++),x=x.substring(S),T=T.substring(S)),S=i(x,T),S!==0&&(l[o][1]=x.substring(x.length-S)+l[o][1],x=x.substring(0,x.length-S),T=T.substring(0,T.length-S))),g===0?l.splice(o-y,g+y,[_,x]):y===0?l.splice(o-g,g+y,[w,T]):l.splice(o-g-y,g+y,[w,T],[_,x]),o=o-g-y+(g?1:0)+(y?1:0)+1):o!==0&&l[o-1][0]==m?(l[o-1][1]+=l[o][1],l.splice(o,1)):o++,y=0,g=0,T="",x="";break}l[l.length-1][1]===""&&l.pop();var I=!1;for(o=1;o<l.length-1;)l[o-1][0]==m&&l[o+1][0]==m&&(l[o][1].substring(l[o][1].length-l[o-1][1].length)==l[o-1][1]?(l[o][1]=l[o-1][1]+l[o][1].substring(0,l[o][1].length-l[o-1][1].length),l[o+1][1]=l[o-1][1]+l[o+1][1],l.splice(o-1,1),I=!0):l[o][1].substring(0,l[o+1][1].length)==l[o+1][1]&&(l[o-1][1]+=l[o+1][1],l[o][1]=l[o][1].substring(l[o+1][1].length)+l[o+1][1],l.splice(o+1,1),I=!0)),o++;I&&n(l)}var a=h;return a.INSERT=_,a.DELETE=w,a.EQUAL=m,Ke=a,Ke}var He,nr;function Ur(){return nr||(nr=1,He={equal:function(w,_){if(w===_||w==null&&_==null)return!0;if(w==null||_==null||Object.keys(w).length!=Object.keys(_).length)return!1;for(var m in w)if(w[m]!==_[m])return!1;return!0},array:function(w){return Array.isArray(w)},number:function(w){return typeof w=="number"||typeof w=="object"&&Object.prototype.toString.call(w)==="[object Number]"},object:function(w){return w?typeof w=="function"||typeof w=="object":!1},string:function(w){return typeof w=="string"||typeof w=="object"&&Object.prototype.toString.call(w)==="[object String]"}}),He}var Ge,rr;function $s(){if(rr)return Ge;rr=1;var w=Ur(),_={attributes:{clone:function(h,f){return w.object(h)?Object.keys(h).reduce(function(p,s){return h[s]!==void 0&&(h[s]!==null||f)&&(p[s]=h[s]),p},{}):{}},compose:function(h,f,p){w.object(h)||(h={}),w.object(f)||(f={});var s=this.clone(f,p);for(var u in h)h[u]!==void 0&&f[u]===void 0&&(s[u]=h[u]);return Object.keys(s).length>0?s:void 0},diff:function(h,f){w.object(h)||(h={}),w.object(f)||(f={});var p=Object.keys(h).concat(Object.keys(f)).reduce(function(s,u){return h[u]!==f[u]&&(s[u]=f[u]===void 0?null:f[u]),s},{});return Object.keys(p).length>0?p:void 0},transform:function(h,f,p){if(!w.object(h))return f;if(w.object(f)){if(!p)return f;var s=Object.keys(f).reduce(function(u,i){return h[i]===void 0&&(u[i]=f[i]),u},{});return Object.keys(s).length>0?s:void 0}}},clone:function(h){var f=this.attributes.clone(h);return w.object(f.attributes)&&(f.attributes=this.attributes.clone(f.attributes,!0)),f},iterator:function(h){return new m(h)},length:function(h){return w.number(h.delete)?h.delete:w.number(h.retain)?h.retain:w.string(h.insert)?h.insert.length:1}};function m(h){this.ops=h,this.index=0,this.offset=0}return m.prototype.hasNext=function(){return this.peekLength()<1/0},m.prototype.next=function(h){h||(h=1/0);var f=this.ops[this.index];if(f){var p=this.offset,s=_.length(f);if(h>=s-p?(h=s-p,this.index+=1,this.offset=0):this.offset+=h,w.number(f.delete))return{delete:h};var u={};return f.attributes&&(u.attributes=f.attributes),w.number(f.retain)?u.retain=h:w.string(f.insert)?u.insert=f.insert.substr(p,h):u.insert=f.insert,u}else return{retain:1/0}},m.prototype.peekLength=function(){return this.ops[this.index]?_.length(this.ops[this.index])-this.offset:1/0},m.prototype.peekType=function(){return this.ops[this.index]?w.number(this.ops[this.index].delete)?"delete":w.number(this.ops[this.index].retain)?"retain":"insert":"retain"},Ge=_,Ge}var ze,ir;function Zs(){if(ir)return ze;ir=1;var w=Ws(),_=Ur(),m=$s(),h=String.fromCharCode(0),f=function(p){_.array(p)?this.ops=p:_.object(p)&&_.array(p.ops)?this.ops=p.ops:this.ops=[]};return f.prototype.insert=function(p,s){var u={};if(_.string(p)){if(p.length===0)return this;u.insert=p}else _.number(p)&&(u.insert=p);return _.object(s)&&Object.keys(s).length>0&&(u.attributes=s),this.push(u)},f.prototype.delete=function(p){return p<=0?this:this.push({delete:p})},f.prototype.retain=function(p,s){if(p<=0)return this;var u={retain:p};return _.object(s)&&Object.keys(s).length>0&&(u.attributes=s),this.push(u)},f.prototype.push=function(p){var s=this.ops.length,u=this.ops[s-1];if(p=m.clone(p),_.object(u)){if(_.number(p.delete)&&_.number(u.delete))return this.ops[s-1]={delete:u.delete+p.delete},this;if(_.number(u.delete)&&(_.string(p.insert)||_.number(p.insert))&&(s-=1,u=this.ops[s-1],!_.object(u)))return this.ops.unshift(p),this;if(_.equal(p.attributes,u.attributes)){if(_.string(p.insert)&&_.string(u.insert))return this.ops[s-1]={insert:u.insert+p.insert},_.object(p.attributes)&&(this.ops[s-1].attributes=p.attributes),this;if(_.number(p.retain)&&_.number(u.retain))return this.ops[s-1]={retain:u.retain+p.retain},_.object(p.attributes)&&(this.ops[s-1].attributes=p.attributes),this}}return this.ops.splice(s,0,p),this},f.prototype.chop=function(){var p=this.ops[this.ops.length-1];return p&&p.retain&&!p.attributes&&this.ops.pop(),this},f.prototype.length=function(){return this.ops.reduce(function(p,s){return p+m.length(s)},0)},f.prototype.slice=function(p,s){p=p||0,_.number(s)||(s=1/0);for(var u=new f,i=m.iterator(this.ops),t=0;t<s&&i.hasNext();){var n;t<p?n=i.next(p-t):(n=i.next(s-t),u.push(n)),t+=m.length(n)}return u},f.prototype.compose=function(p){var s=m.iterator(this.ops),u=m.iterator(p.ops);for(this.ops=[];s.hasNext()||u.hasNext();)if(u.peekType()==="insert")this.push(u.next());else if(s.peekType()==="delete")this.push(s.next());else{var i=Math.min(s.peekLength(),u.peekLength()),t=s.next(i),n=u.next(i);if(_.number(n.retain)){var a={};_.number(t.retain)?a.retain=i:a.insert=t.insert;var l=m.attributes.compose(t.attributes,n.attributes,_.number(t.retain));l&&(a.attributes=l),this.push(a)}else _.number(n.delete)&&_.number(t.retain)&&this.push(n)}return this.chop()},f.prototype.diff=function(p){var s=[this.ops,p.ops].map(function(a){return a.map(function(l){if(_.string(l.insert))return l.insert;if(_.number(l.insert))return h;var o=a===p.ops?"on":"with";throw new Error("diff() called "+o+" non-document")}).join("")}),u=w(s[0],s[1]),i=m.iterator(this.ops),t=m.iterator(p.ops),n=new f;return u.forEach(function(a){for(var l=a[1].length;l>0;){var o=0;switch(a[0]){case w.INSERT:o=Math.min(t.peekLength(),l),n.push(t.next(o));break;case w.DELETE:o=Math.min(l,i.peekLength()),i.next(o),n.delete(o);break;case w.EQUAL:o=Math.min(i.peekLength(),t.peekLength(),l);var g=i.next(o),y=t.next(o);g.insert===y.insert?n.retain(o,m.attributes.diff(g.attributes,y.attributes)):n.push(y).delete(o);break}l-=o}}),n.chop()},f.prototype.transform=function(p,s){if(s=!!s,_.number(p))return this.transformPosition(p,s);for(var u=m.iterator(this.ops),i=m.iterator(p.ops),t=new f;u.hasNext()||i.hasNext();)if(u.peekType()==="insert"&&(s||i.peekType()!=="insert"))t.retain(m.length(u.next()));else if(i.peekType()==="insert")t.push(i.next());else{var n=Math.min(u.peekLength(),i.peekLength()),a=u.next(n),l=i.next(n);if(a.delete)continue;l.delete?t.push(l):t.retain(n,m.attributes.transform(a.attributes,l.attributes,s))}return t.chop()},f.prototype.transformPosition=function(p,s){s=!!s;for(var u=m.iterator(this.ops),i=0;u.hasNext()&&i<=p;){var t=u.peekLength(),n=u.peekType();if(u.next(),n==="delete"){p-=Math.min(t,p-i);continue}else n==="insert"&&(i<p||!s)&&(p+=t);i+=t}return p},ze=f,ze}var ke,sr;function Js(){if(sr)return ke;sr=1;var w=Zs();return ke={Delta:w,name:"rich-text",uri:"http://sharejs.org/types/rich-text/v1",create:function(_){return new w(_)},apply:function(_,m){return _=new w(_),m=new w(m),_.compose(m)},compose:function(_,m){return _=new w(_),m=new w(m),_.compose(m)},diff:function(_,m){return _=new w(_),m=new w(m),_.diff(m)},transform:function(_,m,h){return _=new w(_),m=new w(m),m.transform(_,h==="left")}},ke}var Qe,or;function Tn(){return or||(or=1,Qe=Js()),Qe}var Ve={};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */var ur;function Pr(){return ur||(ur=1,function(w){(function(_){var m=Array.isArray?Array.isArray:function(n){return Object.prototype.toString.call(n)==="[object Array]"},h=10;function f(){this._events={},this._conf&&p.call(this,this._conf)}function p(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function s(t){this._events={},this.newListener=!1,p.call(this,t)}function u(t,n,a,l){if(!a)return[];var o=[],g,y,T,x,S,I,O,U=n.length,F=n[l],B=n[l+1];if(l===U&&a._listeners){if(typeof a._listeners=="function")return t&&t.push(a._listeners),[a];for(g=0,y=a._listeners.length;g<y;g++)t&&t.push(a._listeners[g]);return[a]}if(F==="*"||F==="**"||a[F]){if(F==="*"){for(T in a)T!=="_listeners"&&a.hasOwnProperty(T)&&(o=o.concat(u(t,n,a[T],l+1)));return o}else if(F==="**"){O=l+1===U||l+2===U&&B==="*",O&&a._listeners&&(o=o.concat(u(t,n,a,U)));for(T in a)T!=="_listeners"&&a.hasOwnProperty(T)&&(T==="*"||T==="**"?(a[T]._listeners&&!O&&(o=o.concat(u(t,n,a[T],U))),o=o.concat(u(t,n,a[T],l))):T===B?o=o.concat(u(t,n,a[T],l+2)):o=o.concat(u(t,n,a[T],l)));return o}o=o.concat(u(t,n,a[F],l+1))}if(x=a["*"],x&&u(t,n,x,l+1),S=a["**"],S)if(l<U){S._listeners&&u(t,n,S,U);for(T in S)T!=="_listeners"&&S.hasOwnProperty(T)&&(T===B?u(t,n,S[T],l+2):T===F?u(t,n,S[T],l+1):(I={},I[T]=S[T],u(t,n,{"**":I},l+1)))}else S._listeners?u(t,n,S,U):S["*"]&&S["*"]._listeners&&u(t,n,S["*"],U);return o}function i(t,n){t=typeof t=="string"?t.split(this.delimiter):t.slice();for(var a=0,l=t.length;a+1<l;a++)if(t[a]==="**"&&t[a+1]==="**")return;for(var o=this.listenerTree,g=t.shift();g;){if(o[g]||(o[g]={}),o=o[g],t.length===0){if(!o._listeners)o._listeners=n;else if(typeof o._listeners=="function")o._listeners=[o._listeners,n];else if(m(o._listeners)&&(o._listeners.push(n),!o._listeners.warned)){var y=h;typeof this._events.maxListeners<"u"&&(y=this._events.maxListeners),y>0&&o._listeners.length>y&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}return!0}g=t.shift()}return!0}s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){this._events||f.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},s.prototype.event="",s.prototype.once=function(t,n){return this.many(t,1,n),this},s.prototype.many=function(t,n,a){var l=this;if(typeof a!="function")throw new Error("many only accepts instances of Function");function o(){--n===0&&l.off(t,o),a.apply(this,arguments)}return o._origin=a,this.on(t,o),l},s.prototype.emit=function(){this._events||f.call(this);var t=arguments[0];if(t==="newListener"&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,a=new Array(n-1),l=1;l<n;l++)a[l-1]=arguments[l];for(l=0,n=this._all.length;l<n;l++)this.event=t,this._all[l].apply(this,a)}if(t==="error"&&!this._all&&!this._events.error&&!(this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var g=typeof t=="string"?t.split(this.delimiter):t.slice();u.call(this,o,g,this.listenerTree,0)}else o=this._events[t];if(typeof o=="function"){if(this.event=t,arguments.length===1)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,a=new Array(n-1),l=1;l<n;l++)a[l-1]=arguments[l];o.apply(this,a)}return!0}else if(o){for(var n=arguments.length,a=new Array(n-1),l=1;l<n;l++)a[l-1]=arguments[l];for(var y=o.slice(),l=0,n=y.length;l<n;l++)this.event=t,y[l].apply(this,a);return y.length>0||!!this._all}else return!!this._all},s.prototype.on=function(t,n){if(typeof t=="function")return this.onAny(t),this;if(typeof n!="function")throw new Error("on only accepts instances of Function");if(this._events||f.call(this),this.emit("newListener",t,n),this.wildcard)return i.call(this,t,n),this;if(!this._events[t])this._events[t]=n;else if(typeof this._events[t]=="function")this._events[t]=[this._events[t],n];else if(m(this._events[t])&&(this._events[t].push(n),!this._events[t].warned)){var a=h;typeof this._events.maxListeners<"u"&&(a=this._events.maxListeners),a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}return this},s.prototype.onAny=function(t){if(typeof t!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(t,n){if(typeof n!="function")throw new Error("removeListener only takes instances of Function");var a,l=[];if(this.wildcard){var o=typeof t=="string"?t.split(this.delimiter):t.slice();l=u.call(this,null,o,this.listenerTree,0)}else{if(!this._events[t])return this;a=this._events[t],l.push({_listeners:a})}for(var g=0;g<l.length;g++){var y=l[g];if(a=y._listeners,m(a)){for(var T=-1,x=0,S=a.length;x<S;x++)if(a[x]===n||a[x].listener&&a[x].listener===n||a[x]._origin&&a[x]._origin===n){T=x;break}if(T<0)continue;return this.wildcard?y._listeners.splice(T,1):this._events[t].splice(T,1),a.length===0&&(this.wildcard?delete y._listeners:delete this._events[t]),this}else(a===n||a.listener&&a.listener===n||a._origin&&a._origin===n)&&(this.wildcard?delete y._listeners:delete this._events[t])}return this},s.prototype.offAny=function(t){var n=0,a=0,l;if(t&&this._all&&this._all.length>0){for(l=this._all,n=0,a=l.length;n<a;n++)if(t===l[n])return l.splice(n,1),this}else this._all=[];return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(arguments.length===0)return!this._events||f.call(this),this;if(this.wildcard)for(var n=typeof t=="string"?t.split(this.delimiter):t.slice(),a=u.call(this,null,n,this.listenerTree,0),l=0;l<a.length;l++){var o=a[l];o._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},s.prototype.listeners=function(t){if(this.wildcard){var n=[],a=typeof t=="string"?t.split(this.delimiter):t.slice();return u.call(this,n,a,this.listenerTree,0),n}return this._events||f.call(this),this._events[t]||(this._events[t]=[]),m(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenersAny=function(){return this._all?this._all:[]},typeof _=="function"&&_.amd?_(function(){return s}):w.EventEmitter2=s})()}(Ve)),Ve}var Ye,lr;function Et(){if(lr)return Ye;lr=1;var w,_,m,h,f,p=function(i,t){return function(){return i.apply(t,arguments)}},s={}.hasOwnProperty,u=function(i,t){for(var n in t)s.call(t,n)&&(i[n]=t[n]);function a(){this.constructor=i}return a.prototype=t.prototype,i.prototype=new a,i.__super__=t.prototype,i};return f=mt(),h=null,_=function(){function i(t){this.node=t,this.trigger=p(this.trigger,this)}return i.prototype.addClass=function(t){if(!this.hasClass(t))return this.node.classList!=null?this.node.classList.add(t):this.node.className!=null&&(this.node.className=(this.node.className+" "+t).trim()),this},i.prototype.attributes=function(t){var n,a,l,o,g;if(t)return f.each(t,function(y){return function(T,x){return y.node.setAttribute(x,T)}}(this)),this;if(this.node.attributes==null)return{};for(t={},g=this.node.attributes,a=l=0,o=g.length;l<o;a=++l)g[a],n=this.node.attributes[a],t[n.name]=n.value;return t},i.prototype.child=function(t){var n,a;for(n=this.node.firstChild,a=m(n).length();n!=null&&!(t<a);)t-=a,n=n.nextSibling,a=m(n).length();return n==null&&(n=this.node.lastChild,t=m(n).length()),[n,t]},i.prototype.childNodes=function(){return f.map(this.node.childNodes)},i.prototype.classes=function(){return this.node.className.split(/\s+/)},i.prototype.descendants=function(){return f.map(this.node.getElementsByTagName("*"))},i.prototype.get=function(){return this.node},i.prototype.hasClass=function(t){return this.node.classList!=null?this.node.classList.contains(t):this.node.className!=null?f.indexOf(this.classes(),t)>-1:!1},i.prototype.isAncestor=function(t,n){var a;if(n==null&&(n=!1),t===this.node)return n;for(a=this.node;a;){if(a===t)return!0;a=a.parentNode}return!1},i.prototype.isElement=function(){var t;return((t=this.node)!=null?t.nodeType:void 0)===m.ELEMENT_NODE},i.prototype.isTextNode=function(){var t;return((t=this.node)!=null?t.nodeType:void 0)===m.TEXT_NODE},i.prototype.length=function(){var t;return this.node==null?0:(t=this.text().length,this.isElement()&&(t+=this.node.querySelectorAll(f.keys(m.EMBED_TAGS).join(",")).length),t)},i.prototype.merge=function(t){var n;return n=m(t),this.isElement()?(n.moveChildren(this.node),this.normalize()):this.text(this.text()+n.text()),n.remove(),this},i.prototype.moveChildren=function(t){return f.each(this.childNodes(),function(n){return t.appendChild(n)}),this},i.prototype.nextLineNode=function(t){var n;return n=this.node.nextSibling,n==null&&this.node.parentNode!==t&&(n=this.node.parentNode.nextSibling),n!=null&&m.LIST_TAGS[n.tagName]!=null&&(n=n.firstChild),n},i.prototype.normalize=function(){var t,n,a,l;for(n=this.node.firstChild;n!=null;)l=n.nextSibling,t=m(n),l!=null&&m(l).isTextNode()&&(t.text().length===0?t.remove():t.isTextNode()&&(a=l.nextSibling,t.merge(l),l=a)),n=l;return this},i.prototype.on=function(t,n){return this.node.addEventListener(t,function(a){return function(l){var o,g;return o=h&&(t==="keydown"||t==="keyup")?h:l,g=n.call(a.node,o),g||(l.preventDefault(),l.stopPropagation()),g}}(this)),this},i.prototype.remove=function(){var t;return(t=this.node.parentNode)!=null&&t.removeChild(this.node),this.node=null,null},i.prototype.removeClass=function(t){var n;if(this.hasClass(t))return this.node.classList!=null?this.node.classList.remove(t):(this.node.className!=null&&(n=this.classes(),n.splice(f.indexOf(n,t),1),this.node.className=n.join(" ")),this)},i.prototype.replace=function(t){return this.node.parentNode.replaceChild(t,this.node),this.node=t,t},i.prototype.splitAncestors=function(t,n){var a,l,o,g;if(n==null&&(n=!1),this.node===t||this.node.parentNode===t)return this;if(this.node.previousSibling!=null||n){for(o=this.node.parentNode,l=o.cloneNode(!1),o.parentNode.insertBefore(l,o.nextSibling),g=this.node;g!=null;)a=g.nextSibling,l.appendChild(g),g=a;return m(l).splitAncestors(t)}else return m(this.node.parentNode).splitAncestors(t)},i.prototype.split=function(t,n){var a,l,o,g,y,T,x,S,I;if(n==null&&(n=!1),T=this.length(),t=Math.max(0,t),t=Math.min(t,T),!(n||t!==0))return[this.node.previousSibling,this.node,!1];if(!(n||t!==T))return[this.node,this.node.nextSibling,!1];if(this.node.nodeType===m.TEXT_NODE)return a=this.node.splitText(t),[this.node,a,!0];for(g=this.node,x=this.node.cloneNode(!1),this.node.parentNode.insertBefore(x,g.nextSibling),S=this.child(t),l=S[0],t=S[1],I=m(l).split(t),I[0],o=I[1];o!==null;)y=o.nextSibling,x.appendChild(o),o=y;return[g,x,!0]},i.prototype.styles=function(t,n){var a,l;return n==null&&(n=!1),t?(n||(t=f.defaults(t,this.styles())),l=f.map(t,function(o,g){return""+g+": "+o}).join("; ")+";",this.node.setAttribute("style",l),this):(l=this.node.getAttribute("style")||"",a=f.reduce(l.split(";"),function(o,g){var y,T,x;return x=g.split(":"),y=x[0],T=x[1],y&&T&&(y=y.trim(),T=T.trim(),o[y.toLowerCase()]=T),o},{}),a)},i.prototype.switchTag=function(t){var n,a;return t=t.toUpperCase(),this.node.tagName===t?this:(a=this.node.ownerDocument.createElement(t),n=this.attributes(),m.VOID_TAGS[t]==null&&this.moveChildren(a),this.replace(a),this.attributes(n).get())},i.prototype.text=function(t){if(t!=null){switch(this.node.nodeType){case m.ELEMENT_NODE:this.node.textContent=t;break;case m.TEXT_NODE:this.node.data=t}return this}else switch(this.node.nodeType){case m.ELEMENT_NODE:return this.node.tagName===m.DEFAULT_BREAK_TAG?"":m.EMBED_TAGS[this.node.tagName]!=null?m.EMBED_TEXT:this.node.textContent!=null?this.node.textContent:"";case m.TEXT_NODE:return this.node.data||"";default:return""}},i.prototype.textNodes=function(){var t,n,a;for(a=this.node.ownerDocument.createTreeWalker(this.node,NodeFilter.SHOW_TEXT,null,!1),n=[];t=a.nextNode();)n.push(t);return n},i.prototype.toggleClass=function(t,n){return n==null&&(n=!this.hasClass(t)),n?this.addClass(t):this.removeClass(t),this},i.prototype.trigger=function(t,n){var a,l,o;return n==null&&(n={}),f.indexOf(["keypress","keydown","keyup"],t)<0?(a=this.node.ownerDocument.createEvent("Event"),a.initEvent(t,n.bubbles,n.cancelable)):(a=this.node.ownerDocument.createEvent("KeyboardEvent"),h=f.clone(n),f.isNumber(n.key)?h.which=n.key:f.isString(n.key)?h.which=n.key.toUpperCase().charCodeAt(0):h.which=0,m.isIE(10)?(o=[],n.altKey&&o.push("Alt"),n.ctrlKey&&o.push("Control"),n.metaKey&&o.push("Meta"),n.shiftKey&&o.push("Shift"),a.initKeyboardEvent(t,n.bubbles,n.cancelable,this.window(),0,0,o.join(" "),null,null)):(l=f.isFunction(a.initKeyboardEvent)?"initKeyboardEvent":"initKeyEvent",a[l](t,n.bubbles,n.cancelable,this.window(),n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,0))),this.node.dispatchEvent(a),h=null,this},i.prototype.unwrap=function(){var t,n;return n=this.node.firstChild,t=this.node.nextSibling,f.each(this.childNodes(),function(a){return function(l){return a.node.parentNode.insertBefore(l,t)}}(this)),this.remove(),n},i.prototype.window=function(){return this.node.ownerDocument.defaultView||this.node.ownerDocument.parentWindow},i.prototype.wrap=function(t){var n;for(this.node.parentNode!=null&&this.node.parentNode.insertBefore(t,this.node),n=t;n.firstChild!=null;)n=t.firstChild;return n.appendChild(this.node),this},i}(),w=function(i){u(t,i);function t(){return t.__super__.constructor.apply(this,arguments)}return t.prototype.default=function(){return this.node.querySelector("option[selected]")},t.prototype.option=function(n,a){var l,o,g,y,T,x;if(a==null&&(a=!0),g=f.isElement(n)?n.value:n,g){for(g=g.replace(/[^\w]+/g,""),x=this.node.children,o=y=0,T=x.length;y<T;o=++y)if(l=x[o],l.value.replace(/[^\w]+/g,"")===g){this.node.selectedIndex=o;break}}else this.node.selectedIndex=-1;return a&&this.trigger("change"),this},t.prototype.reset=function(n){var a;return n==null&&(n=!0),a=this.default(),a!=null?a.selected=!0:this.node.selectedIndex=0,n&&this.trigger("change"),this},t.prototype.value=function(){return this.node.selectedIndex>-1?this.node.options[this.node.selectedIndex].value:""},t}(_),m=function(i){return(i!=null?i.tagName:void 0)==="SELECT"?new w(i):new _(i)},m=f.extend(m,{ELEMENT_NODE:1,NOBREAK_SPACE:"&nbsp;",TEXT_NODE:3,ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF",DEFAULT_BLOCK_TAG:"DIV",DEFAULT_BREAK_TAG:"BR",DEFAULT_INLINE_TAG:"SPAN",EMBED_TEXT:"!",FONT_SIZES:{"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7},KEYS:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},BLOCK_TAGS:{ADDRESS:"ADDRESS",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",BLOCKQUOTE:"BLOCKQUOTE",CANVAS:"CANVAS",DD:"DD",DIV:"DIV",DL:"DL",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FOOTER:"FOOTER",FORM:"FORM",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEADER:"HEADER",HGROUP:"HGROUP",LI:"LI",OL:"OL",OUTPUT:"OUTPUT",P:"P",PRE:"PRE",SECTION:"SECTION",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TR:"TR",UL:"UL",VIDEO:"VIDEO"},EMBED_TAGS:{IMG:"IMG"},LINE_TAGS:{DIV:"DIV",LI:"LI"},LIST_TAGS:{OL:"OL",UL:"UL"},VOID_TAGS:{AREA:"AREA",BASE:"BASE",BR:"BR",COL:"COL",COMMAND:"COMMAND",EMBED:"EMBED",HR:"HR",IMG:"IMG",INPUT:"INPUT",KEYGEN:"KEYGEN",LINK:"LINK",META:"META",PARAM:"PARAM",SOURCE:"SOURCE",TRACK:"TRACK",WBR:"WBR"},convertFontSize:function(i){var t,n,a,l;f.isString(i)&&i.indexOf("px")>-1?(a=f.keys(m.FONT_SIZES),l=f.values(m.FONT_SIZES)):(l=f.keys(m.FONT_SIZES),a=f.values(m.FONT_SIZES));for(t in a)if(n=a[t],parseInt(i)<=parseInt(n))return l[t];return f.last(l)},isIE:function(i){var t;return t=document.documentMode,t&&i>=t},isIOS:function(){return/iPhone|iPad/i.test(navigator.userAgent)},isMac:function(){return/Mac/i.test(navigator.platform)}}),Ye=m,Ye}var Xe,ar;function _e(){if(ar)return Xe;ar=1;var w,_,m;return m=mt(),_=Et(),w=function(){h.types={LINE:"line"},h.FORMATS={bold:{tag:"B",prepare:"bold"},italic:{tag:"I",prepare:"italic"},underline:{tag:"U",prepare:"underline"},strike:{tag:"S",prepare:"strikeThrough"},color:{style:"color",default:"rgb(0, 0, 0)",prepare:"foreColor"},background:{style:"backgroundColor",default:"rgb(255, 255, 255)",prepare:"backColor"},font:{style:"fontFamily",default:"'Helvetica', 'Arial', sans-serif",prepare:"fontName"},size:{style:"fontSize",default:"13px",prepare:function(f,p){return f.execCommand("fontSize",!1,_.convertFontSize(p))}},link:{tag:"A",attribute:"href"},image:{tag:"IMG",attribute:"src"},align:{type:h.types.LINE,style:"textAlign",default:"left"},bullet:{type:h.types.LINE,exclude:"list",parentTag:"UL",tag:"LI"},list:{type:h.types.LINE,exclude:"bullet",parentTag:"OL",tag:"LI"}};function h(f,p){this.document=f,this.config=p}return h.prototype.add=function(f,p){var s,u,i,t,n;return p?(this.value(f)===p||(m.isString(this.config.parentTag)&&(i=this.document.createElement(this.config.parentTag),_(f).wrap(i),f.parentNode.tagName===((t=f.parentNode.previousSibling)!=null?t.tagName:void 0)&&_(f.parentNode.previousSibling).merge(f.parentNode),f.parentNode.tagName===((n=f.parentNode.nextSibling)!=null?n.tagName:void 0)&&_(f.parentNode).merge(f.parentNode.nextSibling)),m.isString(this.config.tag)&&(s=this.document.createElement(this.config.tag),_.VOID_TAGS[s.tagName]!=null?(f.parentNode!=null&&_(f).replace(s),f=s):this.isType(h.types.LINE)?f=_(f).switchTag(this.config.tag):(_(f).wrap(s),f=s)),(m.isString(this.config.style)||m.isString(this.config.attribute)||m.isString(this.config.class))&&(m.isString(this.config.class)&&(f=this.remove(f)),_(f).isTextNode()&&(u=this.document.createElement(_.DEFAULT_INLINE_TAG),_(f).wrap(u),f=u),m.isString(this.config.style)&&p!==this.config.default&&(f.style[this.config.style]=p),m.isString(this.config.attribute)&&f.setAttribute(this.config.attribute,p),m.isString(this.config.class)&&_(f).addClass(this.config.class+p))),f):this.remove(f)},h.prototype.isType=function(f){return f===this.config.type},h.prototype.match=function(f){var p,s,u,i,t;if(!_(f).isElement()||m.isString(this.config.parentTag)&&((i=f.parentNode)!=null?i.tagName:void 0)!==this.config.parentTag||m.isString(this.config.tag)&&f.tagName!==this.config.tag||m.isString(this.config.style)&&(!f.style[this.config.style]||f.style[this.config.style]===this.config.default)||m.isString(this.config.attribute)&&!f.hasAttribute(this.config.attribute))return!1;if(m.isString(this.config.class)){for(t=_(f).classes(),s=0,u=t.length;s<u;s++)if(p=t[s],p.indexOf(this.config.class)===0)return!0;return!1}return!0},h.prototype.prepare=function(f){if(m.isString(this.config.prepare))return this.document.execCommand(this.config.prepare,!1,f);if(m.isFunction(this.config.prepare))return this.config.prepare(this.document,f)},h.prototype.remove=function(f){var p,s,u,i;if(!this.match(f))return f;if(m.isString(this.config.style)&&(f.style[this.config.style]="",f.getAttribute("style")||f.removeAttribute("style")),m.isString(this.config.attribute)&&f.removeAttribute(this.config.attribute),m.isString(this.config.class)){for(i=_(f).classes(),s=0,u=i.length;s<u;s++)p=i[s],p.indexOf(this.config.class)===0&&_(f).removeClass(p);f.getAttribute("class")||f.removeAttribute("class")}return m.isString(this.config.tag)&&(this.isType(h.types.LINE)?(m.isString(this.config.parentTag)&&(f.previousSibling!=null&&_(f).splitAncestors(f.parentNode.parentNode),f.nextSibling!=null&&_(f.nextSibling).splitAncestors(f.parentNode.parentNode)),f=_(f).switchTag(_.DEFAULT_BLOCK_TAG)):(f=_(f).switchTag(_.DEFAULT_INLINE_TAG),_.EMBED_TAGS[this.config.tag]!=null&&_(f).text(_.EMBED_TEXT))),m.isString(this.config.parentTag)&&_(f.parentNode).unwrap(),f.tagName===_.DEFAULT_INLINE_TAG&&!f.hasAttributes()&&(f=_(f).unwrap()),f},h.prototype.value=function(f){var p,s,u,i;if(this.match(f)){if(m.isString(this.config.attribute))return f.getAttribute(this.config.attribute)||void 0;if(m.isString(this.config.style))return f.style[this.config.style]||void 0;if(m.isString(this.config.class)){for(i=_(f).classes(),s=0,u=i.length;s<u;s++)if(p=i[s],p.indexOf(this.config.class)===0)return p.slice(this.config.class.length)}else if(m.isString(this.config.tag))return!0}},h}(),Xe=w,Xe}var We,fr;function wn(){if(fr)return We;fr=1;var w,_;return _=function(){function m(h){this.data=h,this.prev=this.next=null}return m}(),w=function(){m.Node=_;function m(){this.length=0,this.first=this.last=null}return m.prototype.append=function(h){return this.first!=null?(h.next=null,this.last.next=h):this.first=h,h.prev=this.last,this.last=h,this.length+=1},m.prototype.insertAfter=function(h,f){return f.prev=h,h!=null?(f.next=h.next,h.next!=null&&(h.next.prev=f),h.next=f,h===this.last&&(this.last=f)):(f.next=this.first,this.first.prev=f,this.first=f),this.length+=1},m.prototype.remove=function(h){return this.length>1?(h.prev!=null&&(h.prev.next=h.next),h.next!=null&&(h.next.prev=h.prev),h===this.first&&(this.first=h.next),h===this.last&&(this.last=h.prev)):this.first=this.last=null,h.prev=h.next=null,this.length-=1},m.prototype.toArray=function(){var h,f;for(h=[],f=this.first;f!=null;)h.push(f),f=f.next;return h},m}(),We=w,We}var $e,hr;function Fr(){if(hr)return $e;hr=1;var w,_,m,h,f={}.hasOwnProperty,p=function(s,u){for(var i in u)f.call(u,i)&&(s[i]=u[i]);function t(){this.constructor=s}return t.prototype=u.prototype,s.prototype=new t,s.__super__=u.prototype,s};return h=mt(),m=Et(),_e(),_=wn(),w=function(s){p(u,s),u.ID_PREFIX="leaf-",u.isLeafNode=function(i){return m(i).isTextNode()||i.firstChild==null};function u(i,t){this.node=i,this.formats=h.clone(t),this.id=h.uniqueId(u.ID_PREFIX),this.text=m(this.node).text(),this.length=this.text.length}return u.prototype.deleteText=function(i,t){var n;if(t>0)return this.text=this.text.slice(0,i)+this.text.slice(i+t),this.length=this.text.length,m.EMBED_TAGS[this.node.tagName]!=null?(n=this.node.ownerDocument.createTextNode(this.text),this.node=m(this.node).replace(n)):m(this.node).text(this.text)},u.prototype.insertText=function(i,t){var n;return this.text=this.text.slice(0,i)+t+this.text.slice(i),m(this.node).isTextNode()?m(this.node).text(this.text):(n=this.node.ownerDocument.createTextNode(t),this.node.tagName===m.DEFAULT_BREAK_TAG?this.node=m(this.node).replace(n):(this.node.appendChild(n),this.node=n)),this.length=this.text.length},u}(_.Node),$e=w,$e}var Ze,cr;function Ht(){if(cr)return Ze;cr=1;var w,_,m;return m=mt(),_=Et(),w={ALIASES:{STRONG:"B",EM:"I",DEL:"S",STRIKE:"S"},ATTRIBUTES:{color:"color",face:"fontFamily",size:"fontSize"},STYLES:{"background-color":"background-color",color:"color","font-family":"font-family","font-size":"font-size","text-align":"text-align"},TAGS:{DIV:"DIV",BR:"BR",SPAN:"SPAN",B:"B",I:"I",S:"S",U:"U",A:"A",IMG:"IMG",OL:"OL",UL:"UL",LI:"LI"},handleBreaks:function(h){var f;return f=m.map(h.querySelectorAll(_.DEFAULT_BREAK_TAG)),m.each(f,function(p){return function(s){if(s.nextSibling!=null&&(!_.isIE(10)||s.previousSibling!=null))return _(s.nextSibling).splitAncestors(h.parentNode)}}()),h},normalizeLine:function(h){return h=w.wrapInline(h),h=w.handleBreaks(h),h=w.pullBlocks(h),h=w.normalizeNode(h),w.unwrapText(h),h!=null&&_.LIST_TAGS[h.tagName]!=null&&(h=h.firstChild),h},normalizeNode:function(h){return _(h).isTextNode()?h:(m.each(w.ATTRIBUTES,function(f,p){var s;if(h.hasAttribute(p))return s=h.getAttribute(p),p==="size"&&(s=_.convertFontSize(s)),h.style[f]=s,h.removeAttribute(p)}),w.whitelistStyles(h),w.whitelistTags(h))},optimizeLine:function(h){var f,p,s,u;for(f=_(h).length(),s=_(h).descendants(),u=[];s.length>0;)p=s.pop(),(p!=null?p.parentNode:void 0)!=null&&_.EMBED_TAGS[p.tagName]==null&&(p.tagName===_.DEFAULT_BREAK_TAG?f!==0?u.push(_(p).remove()):u.push(void 0):_(p).length()===0?(s.push(p.nextSibling),u.push(_(p).unwrap())):p.previousSibling!=null&&p.tagName===p.previousSibling.tagName&&m.isEqual(_(p).attributes(),_(p.previousSibling).attributes())?(s.push(p.firstChild),u.push(_(p.previousSibling).merge(p))):u.push(void 0));return u},pullBlocks:function(h){var f;for(f=h.firstChild;f!=null;){if(_.BLOCK_TAGS[f.tagName]!=null&&f.tagName!=="LI"){f.previousSibling!=null&&_(f).splitAncestors(h.parentNode),f.nextSibling!=null&&_(f.nextSibling).splitAncestors(h.parentNode),_.LIST_TAGS[f.tagName]==null||!f.firstChild?(_(f).unwrap(),w.pullBlocks(h)):(_(f.parentNode).unwrap(),h.parentNode==null&&(h=f));break}f=f.nextSibling}return h},stripComments:function(h){return h.replace(/<!--[\s\S]*?-->/g,"")},stripWhitespace:function(h){return h=h.replace(/^\s+/,"").replace(/\s+$/,""),h=h.replace(/^\s+/,"").replace(/\s+$/,""),h=h.replace(/(\r?\n|\r)+/g," "),h=h.replace(/\>\s+\</g,"><"),h},whitelistStyles:function(h){var f,p;if(f=_(h).styles(),p=m.omit(f,function(s,u){return w.STYLES[u]==null}),m.keys(p).length<m.keys(f).length)return m.keys(p).length>0?_(h).styles(p,!0):h.removeAttribute("style")},whitelistTags:function(h){return _(h).isElement()&&(w.ALIASES[h.tagName]!=null?h=_(h).switchTag(w.ALIASES[h.tagName]):w.TAGS[h.tagName]==null&&(_.BLOCK_TAGS[h.tagName]!=null?h=_(h).switchTag(_.DEFAULT_BLOCK_TAG):!h.hasAttributes()&&h.firstChild!=null?h=_(h).unwrap():h=_(h).switchTag(_.DEFAULT_INLINE_TAG))),h},wrapInline:function(h){var f,p;if(_.BLOCK_TAGS[h.tagName]!=null)return h;for(f=h.ownerDocument.createElement(_.DEFAULT_BLOCK_TAG),h.parentNode.insertBefore(f,h);h!=null&&_.BLOCK_TAGS[h.tagName]==null;)p=h.nextSibling,f.appendChild(h),h=p;return f},unwrapText:function(h){var f;return f=m.map(h.querySelectorAll(_.DEFAULT_INLINE_TAG)),m.each(f,function(p){if(!p.hasAttributes())return _(p).unwrap()})}},Ze=w,Ze}var Je,pr;function Ln(){if(pr)return Je;pr=1;var w,_,m,h,f,p,s,u,i={}.hasOwnProperty,t=function(n,a){for(var l in a)i.call(a,l)&&(n[l]=a[l]);function o(){this.constructor=n}return o.prototype=a.prototype,n.prototype=new o,n.__super__=a.prototype,n};return u=mt(),w=Tn().Delta,s=Et(),_=_e(),m=Fr(),h=Ln(),f=wn(),p=Ht(),h=function(n){t(a,n),a.CLASS_NAME="line",a.ID_PREFIX="line-";function a(l,o){this.doc=l,this.node=o,this.id=u.uniqueId(a.ID_PREFIX),this.formats={},s(this.node).addClass(a.CLASS_NAME),this.rebuild(),a.__super__.constructor.call(this,this.node)}return a.prototype.buildLeaves=function(l,o){return u.each(s(l).childNodes(),function(g){return function(y){var T;return y=p.normalizeNode(y),T=u.clone(o),u.each(g.doc.formats,function(x,S){if(!x.isType(_.types.LINE)&&x.match(y))return T[S]=x.value(y)}),m.isLeafNode(y)?g.leaves.append(new m(y,T)):g.buildLeaves(y,T)}}(this))},a.prototype.deleteText=function(l,o){var g,y,T;if(o>0){for(T=this.findLeafAt(l),y=T[0],l=T[1];y!=null&&o>0;)g=Math.min(o,y.length-l),y.deleteText(l,g),o-=g,y=y.next,l=0;return this.rebuild()}},a.prototype.findLeaf=function(l){var o;for(o=this.leaves.first;o!=null;){if(o.node===l)return o;o=o.next}return null},a.prototype.findLeafAt=function(l,o){var g;if(o==null&&(o=!1),l>=this.length-1)return[this.leaves.last,this.leaves.last.length];for(g=this.leaves.first;g!=null;){if(l<g.length||l===g.length&&o)return[g,l];l-=g.length,g=g.next}return[this.leaves.last,l-this.leaves.last.length]},a.prototype.format=function(l,o){var g;return u.isObject(l)?g=l:(g={},g[l]=o),u.each(g,function(y){return function(T,x){var S,I;return I=y.doc.formats[x],I.isType(_.types.LINE)&&(I.config.exclude&&y.formats[I.config.exclude]&&(S=y.doc.formats[I.config.exclude],S!=null&&(y.node=S.remove(y.node),delete y.formats[I.config.exclude])),y.node=I.add(y.node,T)),T?y.formats[x]=T:delete y.formats[x]}}(this)),this.resetContent()},a.prototype.formatText=function(l,o,g,y){var T,x,S,I,O,U,F,B;if(U=this.findLeafAt(l),x=U[0],S=U[1],T=this.doc.formats[g],T!=null&&T.config.type!==_.types.LINE){for(;x!=null&&o>0;){if(I=x.next,y&&x.formats[g]!==y||!y&&x.formats[g]!=null){if(O=x.node,x.formats[g]!=null)for(s(O).splitAncestors(this.node);!T.match(O);)O=O.parentNode;S>0&&(F=s(O).split(S),F[0],O=F[1]),x.length>S+o&&(B=s(O).split(o),O=B[0],B[1]),T.add(O,y)}o-=x.length-S,S=0,x=I}return this.rebuild()}},a.prototype.insertText=function(l,o,g){var y,T,x,S,I,O;if(g==null&&(g={}),o.length>0)return I=this.findLeafAt(l),y=I[0],T=I[1],u.isEqual(y.formats,g)?(y.insertText(T,o),this.resetContent()):(S=u.reduce(g,function(U){return function(F,B,rt){return U.doc.formats[rt].add(F,B)}}(this),this.node.ownerDocument.createTextNode(o)),O=s(y.node).split(T),O[0],x=O[1],x&&(x=s(x).splitAncestors(this.node).get()),this.node.insertBefore(S,x),this.rebuild())},a.prototype.optimize=function(){return p.optimizeLine(this.node),this.rebuild()},a.prototype.rebuild=function(l){return l==null&&(l=!1),!l&&this.outerHTML!=null&&this.outerHTML===this.node.outerHTML&&u.all(this.leaves.toArray(),function(o){return function(g){return s(g.node).isAncestor(o.node)}}(this))?!1:(this.node=p.normalizeNode(this.node),s(this.node).length()===0&&!this.node.querySelector(s.DEFAULT_BREAK_TAG)&&this.node.appendChild(this.node.ownerDocument.createElement(s.DEFAULT_BREAK_TAG)),this.leaves=new f,this.formats=u.reduce(this.doc.formats,function(o){return function(g,y,T){return y.isType(_.types.LINE)&&(y.match(o.node)?g[T]=y.value(o.node):delete g[T]),g}}(this),this.formats),this.buildLeaves(this.node,{}),this.resetContent(),!0)},a.prototype.resetContent=function(){return this.node.id!==this.id&&(this.node.id=this.id),this.outerHTML=this.node.outerHTML,this.length=1,this.delta=new w,this.leaves.toArray().forEach(function(l){return function(o){return l.length+=o.length,s.EMBED_TAGS[o.node.tagName]!=null?l.delta.insert(1,o.formats):l.delta.insert(o.text,o.formats)}}(this)),this.delta.insert(`
`,this.formats)},a}(f.Node),Je=h,Je}var tn,dr;function Br(){if(dr)return tn;dr=1;var w,_,m,h,f,p,s,u;return u=mt(),w=Tn().Delta,s=Et(),m=_e(),h=Ln(),f=wn(),p=Ht(),_=function(){function i(t,n){this.root=t,n==null&&(n={}),this.formats={},u.each(n.formats,u.bind(this.addFormat,this)),this.setHTML(this.root.innerHTML)}return i.prototype.addFormat=function(t,n){return u.isObject(n)||(n=m.FORMATS[t]),this.formats[t]!=null&&console.warn("Overwriting format",t,this.formats[t]),this.formats[t]=new m(this.root.ownerDocument,n)},i.prototype.appendLine=function(t){return this.insertLineBefore(t,null)},i.prototype.findLeafAt=function(t,n){var a,l,o;return o=this.findLineAt(t),a=o[0],l=o[1],a!=null?a.findLeafAt(l,n):[null,l]},i.prototype.findLine=function(t){for(var n;t!=null&&s.BLOCK_TAGS[t.tagName]==null;)t=t.parentNode;return n=t!=null?this.lineMap[t.id]:null,(n!=null?n.node:void 0)===t?n:null},i.prototype.findLineAt=function(t){var n,a;if(!(this.lines.length>0))return[null,t];if(a=this.toDelta().length(),t===a)return[this.lines.last,this.lines.last.length];if(t>a)return[null,t-a];for(n=this.lines.first;n!=null;){if(t<n.length)return[n,t];t-=n.length,n=n.next}return[null,t]},i.prototype.insertLineBefore=function(t,n){var a;return a=new h(this,t),n!=null?(s(t.parentNode).isElement()||this.root.insertBefore(t,n.node),this.lines.insertAfter(n.prev,a)):(s(t.parentNode).isElement()||this.root.appendChild(t),this.lines.append(a)),this.lineMap[a.id]=a,a},i.prototype.mergeLines=function(t,n){return n.length>1&&(t.length===1&&s(t.leaves.last.node).remove(),u.each(s(n.node).childNodes(),function(a){if(a.tagName!==s.DEFAULT_BREAK_TAG)return t.node.appendChild(a)})),this.removeLine(n),t.rebuild()},i.prototype.optimizeLines=function(){return u.each(this.lines.toArray(),function(t,n){return t.optimize(),!0})},i.prototype.rebuild=function(){var t,n,a;for(n=this.lines.toArray(),t=this.root.firstChild,t!=null&&s.LIST_TAGS[t.tagName]!=null&&(t=t.firstChild),u.each(n,function(l){return function(o,g){for(var y;o.node!==t;)if(o.node.parentNode===l.root||((y=o.node.parentNode)!=null?y.parentNode:void 0)===l.root)t=p.normalizeLine(t),l.insertLineBefore(t,o),t=s(t).nextLineNode(l.root);else return l.removeLine(o);return o.outerHTML!==t.outerHTML&&(o.node=p.normalizeLine(o.node),o.rebuild()),t=s(t).nextLineNode(l.root)}}(this)),a=[];t!=null;)t=p.normalizeLine(t),this.appendLine(t),a.push(t=s(t).nextLineNode(this.root));return a},i.prototype.removeLine=function(t){return t.node.parentNode!=null&&(s.LIST_TAGS[t.node.parentNode.tagName]&&t.node.parentNode.childNodes.length===1?s(t.node.parentNode).remove():s(t.node).remove()),delete this.lineMap[t.id],this.lines.remove(t)},i.prototype.setHTML=function(t){return t=p.stripComments(t),t=p.stripWhitespace(t),this.root.innerHTML=t,this.lines=new f,this.lineMap={},this.rebuild()},i.prototype.splitLine=function(t,n){var a,l,o,g;return n=Math.min(n,t.length-1),g=s(t.node).split(n,!0),a=g[0],l=g[1],t.node=a,t.rebuild(),o=this.insertLineBefore(l,t.next),o.formats=u.clone(t.formats),o.resetContent(),o},i.prototype.toDelta=function(){var t,n;return n=this.lines.toArray(),t=new w,n.forEach(function(a){return a.delta.ops.forEach(function(l){return t.push(l)})}),t},i}(),tn=_,tn}var en,gr;function to(){if(gr)return en;gr=1;var w,_,m,h,f,p;return p=mt(),h=Et(),Ht(),w={html:{height:"100%",width:"100%"},body:{"box-sizing":"border-box",cursor:"text","font-family":"'Helvetica', 'Arial', sans-serif","font-size":"13px",height:"100%","line-height":"1.42",margin:"0px","overflow-x":"hidden","overflow-y":"auto",padding:"12px 15px"},".editor-container":{height:"100%",outline:"none",position:"relative","tab-size":"4","white-space":"pre-wrap"},".editor-container div":{margin:"0",padding:"0"},".editor-container a":{"text-decoration":"underline"},".editor-container b":{"font-weight":"bold"},".editor-container i":{"font-style":"italic"},".editor-container s":{"text-decoration":"line-through"},".editor-container u":{"text-decoration":"underline"},".editor-container img":{"max-width":"100%"},".editor-container blockquote":{margin:"0 0 0 2em",padding:"0"},".editor-container ol":{margin:"0 0 0 2em",padding:"0","list-style-type":"decimal"},".editor-container ul":{margin:"0 0 0 2em",padding:"0","list-style-type":"disc"}},_=["decimal","lower-alpha","lower-roman"],f=".editor-container ol > li",p.each([1,2,3,4,5,6,7,8,9],function(s){return f+=" > ol",w[f]={"list-style-type":_[s%3]},f+=" > li"}),h.isIE(10)&&(w[h.DEFAULT_BREAK_TAG]={display:"none"}),m=function(){s.objToCss=function(u){return p.map(u,function(i,t){var n;return n=p.map(i,function(a,l){return""+l+": "+a+";"}).join(" "),""+t+" { "+n+" }"}).join(`
`)},s.buildFrame=function(u){var i,t,n;return i=u.ownerDocument.createElement("iframe"),h(i).attributes({frameBorder:"0",height:"100%",width:"100%",title:"Quill Rich Text Editor",role:"presentation"}),u.appendChild(i),t=i.contentWindow.document,t.open(),t.write("<!DOCTYPE html>"),t.close(),n=t.createElement("div"),t.body.appendChild(n),[n,i]};function s(u,i){var t;this.container=u,this.options=i??{},this.container.innerHTML="",t=s.buildFrame(this.container),this.root=t[0],this.iframe=t[1],this.root.setAttribute("id",this.options.id),this.iframe.setAttribute("name",this.options.id),h(this.root).addClass("editor-container"),h(this.container).addClass("ql-container"),h.isIOS()&&h(this.container).styles({overflow:"auto","-webkit-overflow-scrolling":"touch"}),this.addStyles(w),this.options.styles!=null&&p.defer(p.bind(this.addStyles,this,this.options.styles))}return s.prototype.addContainer=function(u,i){var t,n;return i==null&&(i=!1),n=i?this.root:null,t=this.root.ownerDocument.createElement("div"),h(t).addClass(u),this.root.parentNode.insertBefore(t,n),t},s.prototype.addStyles=function(u){var i,t;if(typeof u=="object")return t=this.root.ownerDocument.createElement("style"),t.type="text/css",u=s.objToCss(u),t.appendChild(this.root.ownerDocument.createTextNode(u)),this.root.ownerDocument.head.appendChild(t);if(typeof u=="string")return i=this.root.ownerDocument.createElement("link"),h(i).attributes({type:"text/css",rel:"stylesheet",href:u}),this.root.ownerDocument.head.appendChild(i)},s}(),en=m,en}var nn,vr;function jr(){if(vr)return nn;vr=1;var w,_;return _=mt(),w=function(){m.compare=function(h,f){return h===f?!0:h!=null&&f!=null?h.equals(f):!1};function m(h,f){this.start=h,this.end=f}return m.prototype.equals=function(h){return h==null?!1:this.start===h.start&&this.end===h.end},m.prototype.shift=function(h,f){var p;return p=_.map([this.start,this.end],function(s){return h>s?s:f>=0?s+f:Math.max(h,s+f)}),this.start=p[0],this.end=p[1],p},m.prototype.isCollapsed=function(){return this.start===this.end},m}(),nn=w,nn}var rn,mr;function eo(){if(mr)return rn;mr=1;var w,_,m,h,f;return f=mt(),h=Et(),Fr(),w=Ht(),_=jr(),m=function(){function p(s,u,i){this.doc=s,this.iframe=u,this.emitter=i,this.document=this.doc.root.ownerDocument,this.focus=!1,this.range=new _(0,0),this.nullDelay=!1,this.update("silent")}return p.prototype.checkFocus=function(){return this.document.activeElement===this.doc.root&&document.activeElement===this.iframe},p.prototype.getRange=function(s){var u,i,t;return s==null&&(s=!1),this.checkFocus()?(i=this._getNativeRange(),i==null?null:(t=this._positionToIndex(i.startContainer,i.startOffset),i.startContainer===i.endContainer&&i.startOffset===i.endOffset?u=t:u=this._positionToIndex(i.endContainer,i.endOffset),new _(Math.min(t,u),Math.max(t,u)))):s?this.range:null},p.prototype.preserve=function(s){var u,i,t,n,a,l,o,g,y;return t=this._getNativeRange(),t!=null&&this.checkFocus()?(l=this._encodePosition(t.startContainer,t.startOffset),n=l[0],a=l[1],o=this._encodePosition(t.endContainer,t.endOffset),u=o[0],i=o[1],s(),g=this._decodePosition(n,a),n=g[0],a=g[1],y=this._decodePosition(u,i),u=y[0],i=y[1],this._setNativeRange(n,a,u,i)):s()},p.prototype.setRange=function(s,u){var i,t,n,a,l,o,g;return s!=null?(l=this._indexToPosition(s.start),n=l[0],a=l[1],s.isCollapsed()?(o=[n,a],i=o[0],t=o[1]):(g=this._indexToPosition(s.end),i=g[0],t=g[1]),this._setNativeRange(n,a,i,t)):this._setNativeRange(null),this.update(u)},p.prototype.shiftAfter=function(s,u,i){var t;if(t=this.getRange(),i(),t!=null)return t.shift(s,u),this.setRange(t,"silent")},p.prototype.update=function(s){var u,i,t,n;if(i=this.checkFocus(),t=this.getRange(!0),u=s!=="silent"&&(!_.compare(t,this.range)||i!==this.focus),n=i?t:null,n===null&&s==="user"&&!this.nullDelay)return this.nullDelay=!0;if(this.nullDelay=!1,this.range=t,this.focus=i,u)return this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE,n,s)},p.prototype._decodePosition=function(s,u){var i;return h(s).isElement()&&(i=f.indexOf(h(s.parentNode).childNodes(),s),u+=i,s=s.parentNode),[s,u]},p.prototype._encodePosition=function(s,u){for(var i;;){if(h(s).isTextNode()||s.tagName===h.DEFAULT_BREAK_TAG||h.EMBED_TAGS[s.tagName]!=null)return[s,u];if(u<s.childNodes.length)s=s.childNodes[u],u=0;else{if(s.childNodes.length===0)return w.TAGS[s.tagName]==null&&(i=s.ownerDocument.createTextNode(""),s.appendChild(i),s=i),[s,0];if(s=s.lastChild,h(s).isElement()){if(s.tagName===h.DEFAULT_BREAK_TAG||h.EMBED_TAGS[s.tagName]!=null)return[s,1];u=s.childNodes.length}else return[s,h(s).length()]}}},p.prototype._getNativeRange=function(){var s,u;return u=this.document.getSelection(),(u!=null?u.rangeCount:void 0)>0&&(s=u.getRangeAt(0),h(s.startContainer).isAncestor(this.doc.root,!0)&&(s.startContainer===s.endContainer||h(s.endContainer).isAncestor(this.doc.root,!0)))?s:null},p.prototype._indexToPosition=function(s){var u,i,t;return this.doc.lines.length===0?[this.doc.root,0]:(t=this.doc.findLeafAt(s,!0),u=t[0],i=t[1],this._decodePosition(u.node,i))},p.prototype._positionToIndex=function(s,u){var i,t,n,a,l,o;if(o=this._encodePosition(s,u),t=o[0],u=o[1],a=this.doc.findLine(t),a==null)return 0;for(i=a.findLeaf(t),l=0;a.prev!=null;)a=a.prev,l+=a.length;if(i==null)return l;for(n=0;i.prev!=null;)i=i.prev,n+=i.length;return l+n+u},p.prototype._setNativeRange=function(s,u,i,t){var n,a;if(a=this.document.getSelection(),!!a)if(s!=null){if(this.checkFocus()||this.doc.root.focus(),n=this._getNativeRange(),(n==null||s!==n.startContainer||u!==n.startOffset||i!==n.endContainer||t!==n.endOffset)&&(a.removeAllRanges(),n=this.document.createRange(),n.setStart(s,u),n.setEnd(i,t),a.addRange(n),!this.checkFocus()))return this.doc.root.focus()}else return a.removeAllRanges(),this.doc.root.blur()},p}(),rn=m,rn}var sn,yr;function no(){if(yr)return sn;yr=1;var w,_,m,h,f,p;return p=mt(),f=Et(),w=Br(),Ln(),m=to(),h=eo(),_=function(){s.sources={API:"api",SILENT:"silent",USER:"user"};function s(u,i,t){this.iframeContainer=u,this.quill=i,this.options=t??{},this.renderer=new m(this.iframeContainer,this.options),f(this.iframeContainer).on("focus",this.focus.bind(this)),this.root=this.renderer.root,this.doc=new w(this.root,this.options),this.delta=this.doc.toDelta(),this.selection=new h(this.doc,this.renderer.iframe,this.quill),this.timer=setInterval(p.bind(this.checkUpdate,this),this.options.pollInterval),this.options.readOnly||this.enable()}return s.prototype.disable=function(){return this.enable(!1)},s.prototype.enable=function(u){return u==null&&(u=!0),this.root.setAttribute("contenteditable",u)},s.prototype.applyDelta=function(u,i){var t;if(t=this._update(),t&&(u=t.transform(u,!0),t=u.transform(t,!1)),u.ops.length>0&&(u=this._trackDelta(function(n){return function(){var a;return a=0,p.each(u.ops,function(l){if(p.isString(l.insert))return n._insertAt(a,l.insert,l.attributes),a+=l.insert.length;if(p.isNumber(l.insert))return n._insertAt(a,f.EMBED_TEXT,l.attributes),a+=1;if(p.isNumber(l.delete))return n._deleteAt(a,l.delete);if(p.isNumber(l.retain))return p.each(l.attributes,function(o,g){return n._formatAt(a,l.retain,g,o)}),a+=l.retain}),n.selection.shiftAfter(0,0,p.bind(n.doc.optimizeLines,n.doc))}}(this)),this.delta=this.doc.toDelta(),this.innerHTML=this.root.innerHTML,u&&i!==s.sources.SILENT&&this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,u,i)),t&&t.ops.length>0&&i!==s.sources.SILENT)return this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,t,s.sources.USER)},s.prototype.checkUpdate=function(u){var i;return u==null&&(u="user"),this.renderer.iframe.parentNode==null||this.root.parentNode==null?clearInterval(this.timer):(i=this._update(),i&&(this.delta.compose(i),this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,i,u)),i&&(u=s.sources.SILENT),this.selection.update(u))},s.prototype.focus=function(){return f.isIE(11)&&this.selection.setRange(this.selection.range),f.isIOS()&&this.renderer.iframe.focus(),this.root.focus()},s.prototype.getDelta=function(){return this.delta},s.prototype._deleteAt=function(u,i){if(!(i<=0))return this.selection.shiftAfter(u,-1*i,function(t){return function(){var n,a,l,o,g,y,T;for(T=t.doc.findLineAt(u),l=T[0],y=T[1],n=l,o=l.length-y<=i&&y>0;n!=null&&i>0;)g=n.next,a=Math.min(n.length-y,i),y===0&&i>=n.length?t.doc.removeLine(n):n.deleteText(y,a),i-=a,n=g,y=0;if(o&&l.next)return t.doc.mergeLines(l,l.next)}}(this))},s.prototype._formatAt=function(u,i,t,n){return this.selection.shiftAfter(u,0,function(a){return function(){var l,o,g,y,T;for(y=a.doc.findLineAt(u),o=y[0],g=y[1],T=[];o!=null&&i>0;)l=Math.min(i,o.length-g-1),o.formatText(g,l,t,n),i-=l,i>0&&o.format(t,n),i-=1,g=0,T.push(o=o.next);return T}}(this))},s.prototype._insertAt=function(u,i,t){return t==null&&(t={}),this.selection.shiftAfter(u,i.length,function(n){return function(){var a,l,o,g;return i=i.replace(/\r\n/g,`
`).replace(/\r/g,`
`),l=i.split(`
`),g=n.doc.findLineAt(u),a=g[0],o=g[1],p.each(l,function(y,T){var x;return a==null||a.length<=o?(T<l.length-1||y.length>0)&&(a=n.doc.appendLine(n.root.ownerDocument.createElement(f.DEFAULT_BLOCK_TAG)),o=0,a.insertText(o,y,t),a.format(t),x=null):(a.insertText(o,y,t),T<l.length-1&&(x=n.doc.splitLine(a,o+y.length),p.each(p.defaults({},t,a.formats),function(S,I){return a.format(I,t[I])}),o=0)),a=x})}}(this))},s.prototype._trackDelta=function(u){var i,t;return u(),t=this.doc.toDelta(),i=this.delta.diff(t),i},s.prototype._update=function(){var u;return this.innerHTML===this.root.innerHTML?!1:(u=this._trackDelta(function(i){return function(){return i.selection.preserve(p.bind(i.doc.rebuild,i.doc)),i.selection.shiftAfter(0,0,p.bind(i.doc.optimizeLines,i.doc))}}(this)),this.innerHTML=this.root.innerHTML,u.ops.length>0?u:!1)},s}(),sn=_,sn}var on,_r;function Kr(){if(_r)return on;_r=1;var w;return w=function(){_.OPTIONS={};function _(m){this.quill=m,this.editor=this.quill.editor,this.editorContainer=this.editor.root}return _}(),on=w,on}var un,br;function Hr(){if(br)return un;br=1;var w,_,m,h;return h=mt(),m=Et(),w=Ht(),_=function(){f.TEMPLATE='<span class="ql-picker-label"></span><span class="ql-picker-options"></span>';function f(p){this.select=p,this.container=this.select.ownerDocument.createElement("span"),this.buildPicker(),m(this.container).addClass("ql-picker"),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),m(this.select.ownerDocument).on("click",function(s){return function(){return s.close(),!0}}(this)),m(this.label).on("click",function(s){return function(){return h.defer(function(){return m(s.container).toggleClass("ql-expanded")}),!1}}(this)),m(this.select).on("change",function(s){return function(){var u,i;return s.select.selectedIndex>-1&&(u=s.container.querySelectorAll(".ql-picker-item")[s.select.selectedIndex],i=s.select.options[s.select.selectedIndex]),s.selectItem(u,!1),m(s.label).toggleClass("ql-active",i!==m(s.select).default())}}(this))}return f.prototype.buildItem=function(p,s,u){var i;return i=this.select.ownerDocument.createElement("span"),i.setAttribute("data-value",s.getAttribute("value")),m(i).addClass("ql-picker-item").text(m(s).text()).on("click",function(t){return function(){return t.selectItem(i,!0),t.close()}}(this)),this.select.selectedIndex===u&&this.selectItem(i,!1),i},f.prototype.buildPicker=function(){var p;return h.each(m(this.select).attributes(),function(s){return function(u,i){return s.container.setAttribute(i,u)}}(this)),this.container.innerHTML=w.stripWhitespace(f.TEMPLATE),this.label=this.container.querySelector(".ql-picker-label"),p=this.container.querySelector(".ql-picker-options"),h.each(this.select.options,function(s){return function(u,i){var t;return t=s.buildItem(p,u,i),p.appendChild(t)}}(this))},f.prototype.close=function(){return m(this.container).removeClass("ql-expanded")},f.prototype.selectItem=function(p,s){var u,i;return u=this.container.querySelector(".ql-selected"),u!=null&&m(u).removeClass("ql-selected"),p!=null?(i=p.getAttribute("data-value"),m(p).addClass("ql-selected"),m(this.label).text(m(p).text()),m(this.select).option(i,s),this.label.setAttribute("data-value",i)):(this.label.innerHTML="&nbsp;",this.label.removeAttribute("data-value"))},f}(),un=_,un}var ln,Er;function ro(){if(Er)return ln;Er=1;var w,_,m,h={}.hasOwnProperty,f=function(p,s){for(var u in s)h.call(s,u)&&(p[u]=s[u]);function i(){this.constructor=p}return i.prototype=s.prototype,p.prototype=new i,p.__super__=s.prototype,p};return m=Et(),_=Hr(),w=function(p){f(s,p);function s(){s.__super__.constructor.apply(this,arguments),m(this.container).addClass("ql-color-picker")}return s.prototype.buildItem=function(u,i,t){var n;return n=s.__super__.buildItem.call(this,u,i,t),n.style.backgroundColor=i.value,n},s}(_),ln=w,ln}var an,Tr;function io(){if(Tr)return an;Tr=1;var w,_,m,h,f,p,s={}.hasOwnProperty,u=function(i,t){for(var n in t)s.call(t,n)&&(i[n]=t[n]);function a(){this.constructor=i}return a.prototype=t.prototype,i.prototype=new a,i.__super__=t.prototype,i};return p=mt(),w=ro(),_=Kr(),f=Et(),m=Hr(),h=function(i){u(t,i),t.COLORS=["#000000","#e60000","#ff9900","#ffff00","#008A00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],t.OPTIONS={"multi-cursor":{template:'<span class="cursor-flag"> <span class="cursor-triangle top"></span> <span class="cursor-name"></span> <span class="cursor-triangle bottom"></span> </span> <span class="cursor-caret"></span>'}},t.STYLES={".snow .image-tooltip-container a":{border:"1px solid #06c"},".snow .image-tooltip-container a.insert":{"background-color":"#06c",color:"#fff"},".snow .cursor-name":{"border-radius":"4px","font-size":"11px","font-family":"Arial","margin-left":"-50%",padding:"4px 10px"},".snow .cursor-triangle":{"border-left":"4px solid transparent","border-right":"4px solid transparent",height:"0px","margin-left":"-3px",width:"0px"},".snow .cursor.left .cursor-name":{"margin-left":"-8px"},".snow .cursor.right .cursor-flag":{right:"auto"},".snow .cursor.right .cursor-name":{"margin-left":"-100%","margin-right":"-8px"},".snow .cursor-triangle.bottom":{"border-top":"4px solid transparent",display:"block","margin-bottom":"-1px"},".snow .cursor-triangle.top":{"border-bottom":"4px solid transparent",display:"none","margin-top":"-1px"},".snow .cursor.top .cursor-triangle.bottom":{display:"none"},".snow .cursor.top .cursor-triangle.top":{display:"block"},".snow a":{color:"#06c"},".snow .tooltip":{border:"1px solid #ccc","box-shadow":"0px 0px 5px #ddd",color:"#222"},".snow .tooltip a":{color:"#06c"},".snow .tooltip .input":{border:"1px solid #ccc",margin:"0px",padding:"5px"},".snow .image-tooltip-container .preview":{"border-color":"#ccc",color:"#ccc"},".snow .link-tooltip-container a, .snow .link-tooltip-container span":{display:"inline-block","line-height":"25px"}};function t(n){this.quill=n,t.__super__.constructor.apply(this,arguments),this.quill.addStyles(t.STYLES),this.pickers=[],this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(a){return function(l){if(l!=null)return p.invoke(a.pickers,"close")}}(this)),f(this.quill.root.ownerDocument.body).addClass("snow"),this.quill.onModuleLoad("multi-cursor",p.bind(this.extendMultiCursor,this)),this.quill.onModuleLoad("toolbar",p.bind(this.extendToolbar,this))}return t.prototype.extendMultiCursor=function(n){return n.on(n.constructor.events.CURSOR_ADDED,function(a){var l,o;return l=a.elem.querySelector(".cursor-triangle.bottom"),o=a.elem.querySelector(".cursor-triangle.top"),l.style.borderTopColor=o.style.borderBottomColor=a.color})},t.prototype.extendToolbar=function(n){return p.each(["color","background","font","size","align"],function(a){return function(l){var o,g;if(g=n.container.querySelector(".ql-"+l),g!=null){switch(l){case"font":case"size":case"align":o=new m(g);break;case"color":case"background":o=new w(g),p.each(o.container.querySelectorAll(".ql-picker-item"),function(y,T){if(T<7)return f(y).addClass("ql-primary-color")})}if(o!=null)return a.pickers.push(o)}}}(this)),p.each(f(n.container).textNodes(),function(a){if(f(a).text().trim().length===0)return f(a).remove()})},t}(_),an=h,an}var fn,wr;function At(){if(wr)return fn;wr=1;var w,_,m,h,f,p,s,u,i,t={}.hasOwnProperty,n=function(l,o){for(var g in o)t.call(o,g)&&(l[g]=o[g]);function y(){this.constructor=l}return y.prototype=o.prototype,l.prototype=new y,l.__super__=o.prototype,l},a=[].slice;return i=mt(),u=Xs,w=Tn().Delta,m=Pr().EventEmitter2,s=Et(),_=no(),h=_e(),p=jr(),f=function(l){n(o,l),o.version=u.version,o.editors=[],o.modules=[],o.themes=[],o.DEFAULTS={formats:["align","bold","italic","strike","underline","color","background","font","size","link","image","bullet","list"],modules:{keyboard:!0,"paste-manager":!0,"undo-manager":!0},pollInterval:100,readOnly:!1,theme:"default"},o.events={MODULE_INIT:"module-init",POST_EVENT:"post-event",PRE_EVENT:"pre-event",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},o.sources=_.sources,o.registerModule=function(g,y){return o.modules[g]!=null&&console.warn("Overwriting "+g+" module"),o.modules[g]=y},o.registerTheme=function(g,y){return o.themes[g]!=null&&console.warn("Overwriting "+g+" theme"),o.themes[g]=y},o.require=function(g){switch(g){case"lodash":return i;case"delta":return w;case"dom":return s;default:return null}};function o(g,y){var T,x,S;if(y==null&&(y={}),i.isString(g)&&(g=document.querySelector(g)),g==null)throw new Error("Invalid Quill container");if(x=i.defaults(y.modules||{},o.DEFAULTS.modules),T=g.innerHTML,this.options=i.defaults(y,o.DEFAULTS),this.options.modules=x,this.options.id=this.id="quill-"+(o.editors.length+1),this.options.emitter=this,this.modules={},this.editor=new _(g,this,this.options),this.root=this.editor.doc.root,o.editors.push(this),this.setHTML(T,o.sources.SILENT),S=o.themes[this.options.theme],S==null)throw new Error("Cannot load "+this.options.theme+" theme. Are you sure you registered it?");this.theme=new S(this,this.options),i.each(this.options.modules,function(I){return function(O,U){return I.addModule(U,O)}}(this))}return o.prototype.addContainer=function(g,y){return y==null&&(y=!1),this.editor.renderer.addContainer(g,y)},o.prototype.addFormat=function(g,y){return this.editor.doc.addFormat(g,y)},o.prototype.addModule=function(g,y){var T;if(T=o.modules[g],T==null)throw new Error("Cannot load "+g+" module. Are you sure you registered it?");return i.isObject(y)||(y={}),y=i.defaults(y,this.theme.constructor.OPTIONS[g]||{},T.DEFAULTS||{}),this.modules[g]=new T(this,y),this.emit(o.events.MODULE_INIT,g,this.modules[g]),this.modules[g]},o.prototype.addStyles=function(g){return this.editor.renderer.addStyles(g)},o.prototype.deleteText=function(g,y,T){var x,S;if(T==null&&(T=o.sources.API),S=this._buildParams(g,y,{},T),g=S[0],y=S[1],S[2],T=S[3],y>g)return x=new w().retain(g).delete(y-g),this.editor.applyDelta(x,T)},o.prototype.emit=function(){var g,y;return y=arguments[0],g=2<=arguments.length?a.call(arguments,1):[],o.__super__.emit.apply(this,[o.events.PRE_EVENT,y].concat(a.call(g))),o.__super__.emit.apply(this,[y].concat(a.call(g))),o.__super__.emit.apply(this,[o.events.POST_EVENT,y].concat(a.call(g)))},o.prototype.focus=function(){return this.editor.focus()},o.prototype.formatLine=function(g,y,T,x,S){var I,O,U,F,B;return F=this._buildParams(g,y,T,x,S),g=F[0],y=F[1],I=F[2],S=F[3],B=this.editor.doc.findLineAt(y),O=B[0],U=B[1],O!=null&&(y+=O.length-U),this.formatText(g,y,I,S)},o.prototype.formatText=function(g,y,T,x,S){var I,O,U;return U=this._buildParams(g,y,T,x,S),g=U[0],y=U[1],O=U[2],S=U[3],O=i.reduce(O,function(F){return function(B,rt,Q){var Z;return Z=F.editor.doc.formats[Q],rt&&rt!==Z.config.default||(B[Q]=null),B}}(this),O),I=new w().retain(g).retain(y-g,O),this.editor.applyDelta(I,S)},o.prototype.getContents=function(g,y){return g==null&&(g=0),y==null&&(y=null),i.isObject(g)&&(y=g.end,g=g.start),this.editor.getDelta().slice(g,y)},o.prototype.getHTML=function(){return this.root.innerHTML},o.prototype.getLength=function(){return this.editor.getDelta().length()},o.prototype.getModule=function(g){return this.modules[g]},o.prototype.getSelection=function(){return this.editor.checkUpdate(),this.editor.selection.getRange()},o.prototype.getText=function(g,y){return g==null&&(g=0),y==null&&(y=null),i.map(this.getContents(g,y).ops,function(T){return i.isString(T.insert)?T.insert:""}).join("")},o.prototype.insertEmbed=function(g,y,T,x){return this.insertText(g,s.EMBED_TEXT,y,T,x)},o.prototype.insertText=function(g,y,T,x,S){var I,O,U;if(U=this._buildParams(g,0,T,x,S),g=U[0],U[1],O=U[2],S=U[3],y.length>0)return I=new w().retain(g).insert(y,O),this.editor.applyDelta(I,S)},o.prototype.onModuleLoad=function(g,y){return this.modules[g]?y(this.modules[g]):this.on(o.events.MODULE_INIT,function(T,x){if(T===g)return y(x)})},o.prototype.prepareFormat=function(g,y){var T,x;if(T=this.editor.doc.formats[g],T!=null&&(x=this.getSelection(),!!(x!=null&&x.isCollapsed())))return T.isType(h.types.LINE)?this.formatLine(x,g,y,o.sources.USER):T.prepare(y)},o.prototype.setContents=function(g,y){return y==null&&(y=o.sources.API),i.isArray(g)&&(g={ops:g}),g.ops.unshift({delete:this.getLength()}),this.updateContents(g,y)},o.prototype.setHTML=function(g,y){return y==null&&(y=o.sources.API),g||(g="<"+s.DEFAULT_BLOCK_TAG+"><"+s.DEFAULT_BREAK_TAG+"></"+s.DEFAULT_BLOCK_TAG+">"),this.editor.doc.setHTML(g),this.editor.checkUpdate(y)},o.prototype.setSelection=function(g,y,T){var x;return T==null&&(T=o.sources.API),i.isNumber(g)&&i.isNumber(y)?x=new p(g,y):(x=g,T=y||T),this.editor.selection.setRange(x,T)},o.prototype.updateContents=function(g,y){return y==null&&(y=o.sources.API),this.editor.applyDelta(g,y)},o.prototype._buildParams=function(){var g,y;return y=1<=arguments.length?a.call(arguments,0):[],i.isObject(y[0])&&y.splice(0,1,y[0].start,y[0].end),i.isString(y[2])&&(g={},g[y[2]]=y[3],y.splice(2,2,g)),y[3]==null&&(y[3]=o.sources.API),y},o}(m),f.registerTheme("default",Kr()),f.registerTheme("snow",io()),fn=f,fn}var hn,Lr;function so(){if(Lr)return hn;Lr=1;var w,_,m,h,f;return m=At(),f=m.require("lodash"),h=m.require("dom"),_=m.require("delta"),w=function(){p.DEFAULTS={authorId:null,color:"transparent",enabled:!1};function p(s,u){this.quill=s,this.options=u,this.options.button!=null&&this.attachButton(this.options.button),this.options.enabled&&this.enable(),this.quill.addFormat("author",{class:"author-"}),this.options.authorId!=null&&(this.quill.on(this.quill.constructor.events.PRE_EVENT,function(i){return function(t,n,a){var l,o;if(t===i.quill.constructor.events.TEXT_CHANGE&&a==="user")return l=new _,o={author:i.options.authorId},f.each(n.ops,function(g){if(g.delete==null)return g.insert!=null||g.retain!=null&&g.attributes!=null?(g.attributes||(g.attributes={}),g.attributes.author=i.options.authorId,l.retain(g.retain||g.insert.length||1,o)):l.retain(g.retain)}),i.quill.updateContents(l,m.sources.SILENT)}}(this)),this.addAuthor(this.options.authorId,this.options.color))}return p.prototype.addAuthor=function(s,u){var i;return i={},i[".authorship .author-"+s]={"background-color":""+u},this.quill.addStyles(i)},p.prototype.attachButton=function(s){var u;return u=h(s),u.on("click",function(i){return function(){return u.toggleClass("ql-on"),i.enable($dom.hasClass("ql-on"))}}(this))},p.prototype.enable=function(s){return s==null&&(s=!0),h(this.quill.root).toggleClass("authorship",s)},p.prototype.disable=function(){return this.enable(!1)},p}(),m.registerModule("authorship",w),hn=w,hn}var cn,xr;function xn(){if(xr)return cn;xr=1;var w,_,m,h,f;return _=At(),w=Ht(),f=_.require("lodash"),h=_.require("dom"),m=function(){p.DEFAULTS={offset:10,styles:{".tooltip":{"background-color":"#fff",border:"1px solid #000",top:"0px","white-space":"nowrap","z-index":"2000"},".tooltip a":{cursor:"pointer","text-decoration":"none"}},template:""},p.HIDE_MARGIN="-10000px";function p(s,u){this.quill=s,this.options=u,this.quill.addStyles(this.options.styles),this.container=this.quill.addContainer("tooltip"),this.container.innerHTML=w.stripWhitespace(this.options.template),this.container.style.position="absolute",h(this.quill.root).on("focus",f.bind(this.hide,this)),this.hide(),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(i){return function(t,n){if(n==="user"&&i.container.style.left!==p.HIDE_MARGIN)return i.range=null,i.hide()}}(this))}return p.prototype.initTextbox=function(s,u,i){return h(s).on("keyup",function(t){return function(n){switch(n.which){case h.KEYS.ENTER:return u.call(t);case h.KEYS.ESCAPE:return i.call(t);default:return!0}}}(this))},p.prototype.hide=function(){return this.container.style.left=p.HIDE_MARGIN,this.range&&this.quill.setSelection(this.range),this.range=null},p.prototype.show=function(s){var u,i,t,n,a;return this.range=this.quill.getSelection(),n=this._position(s),u=n[0],i=n[1],a=this._limit(u,i),u=a[0],i=a[1],t=h(this.quill.root).window(),u+=t.pageXOffset,i+=t.pageYOffset,this.container.style.left=""+u+"px",this.container.style.top=""+i+"px",this.container.focus()},p.prototype._getBounds=function(){var s,u,i,t;return s=this.quill.root.getBoundingClientRect(),t=h(this.quill.root).window(),u=t.pageXOffset,i=t.pageYOffset,{left:s.left+u,right:s.right+u,top:s.top+i,bottom:s.bottom+i,width:s.width,height:s.height}},p.prototype._limit=function(s,u){var i,t;return i=this._getBounds(),t=this.container.getBoundingClientRect(),s=Math.min(i.right-t.width,s),s=Math.max(i.left,s),u=Math.min(i.bottom-t.height,u),u=Math.max(i.top,u),[s,u]},p.prototype._position=function(s){var u,i,t,n,a;return n=this.container.getBoundingClientRect(),u=this._getBounds(),s!=null?(t=s.getBoundingClientRect(),i=t.left+t.width/2-n.width/2,a=t.top+t.height+this.options.offset,a+n.height>u.bottom&&(a=t.top-n.height-this.options.offset)):(i=u.left+u.width/2-n.width/2,a=u.top+u.height/2-n.height/2),[i,a]},p}(),_.registerModule("tooltip",m),cn=m,cn}var pn,Cr;function oo(){if(Cr)return pn;Cr=1;var w,_,m,h,f,p={}.hasOwnProperty,s=function(u,i){for(var t in i)p.call(i,t)&&(u[t]=i[t]);function n(){this.constructor=u}return n.prototype=i.prototype,u.prototype=new n,u.__super__=i.prototype,u};return _=At(),m=xn(),f=_.require("lodash"),h=_.require("dom"),_.require("delta"),w=function(u){s(i,u),i.DEFAULTS={styles:{".image-tooltip-container":{margin:"25px",padding:"10px",width:"300px"},".image-tooltip-container:after":{clear:"both",content:'""',display:"table"},".image-tooltip-container .preview":{margin:"10px 0px",position:"relative",border:"1px dashed #000",height:"200px"},".image-tooltip-container .preview span":{display:"inline-block",position:"absolute","text-align":"center",top:"40%",width:"100%"},".image-tooltip-container img":{bottom:"0",left:"0",margin:"auto","max-height":"100%","max-width":"100%",position:"absolute",right:"0",top:"0"},".image-tooltip-container .input":{"box-sizing":"border-box",width:"100%"},".image-tooltip-container a":{border:"1px solid black","box-sizing":"border-box",display:"inline-block",float:"left",padding:"5px","text-align":"center",width:"50%"}},template:'<input class="input" type="textbox"> <div class="preview"> <span>Preview</span> </div> <a href="javascript:;" class="cancel">Cancel</a> <a href="javascript:;" class="insert">Insert</a>'};function i(t,n){this.quill=t,this.options=n,this.options.styles=f.defaults(this.options.styles,m.DEFAULTS.styles),this.options=f.defaults(this.options,m.DEFAULTS),i.__super__.constructor.call(this,this.quill,this.options),this.preview=this.container.querySelector(".preview"),this.textbox=this.container.querySelector(".input"),h(this.container).addClass("image-tooltip-container"),this.initListeners()}return i.prototype.initListeners=function(){return h(this.container.querySelector(".insert")).on("click",f.bind(this.insertImage,this)),h(this.container.querySelector(".cancel")).on("click",f.bind(this.hide,this)),h(this.textbox).on("input",f.bind(this._preview,this)),this.initTextbox(this.textbox,this.insertImage,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(n){return n.initFormat("image",f.bind(t._onToolbar,t))}}(this))},i.prototype.insertImage=function(){var t,n;return n=this._normalizeURL(this.textbox.value),this.range==null&&(this.range=new Range(0,0)),this.range&&(this.preview.innerHTML="<span>Preview</span>",this.textbox.value="",t=this.range.end,this.quill.insertEmbed(t,"image",n,"user"),this.quill.setSelection(t+1,t+1)),this.hide()},i.prototype._onToolbar=function(t,n){return n?(this.textbox.value||(this.textbox.value="http://"),this.show(),this.textbox.focus(),f.defer(function(a){return function(){return a.textbox.setSelectionRange(a.textbox.value.length,a.textbox.value.length)}}(this))):this.quill.deleteText(t,"user")},i.prototype._preview=function(){var t;if(this._matchImageURL(this.textbox.value))return this.preview.firstChild.tagName==="IMG"?this.preview.firstChild.setAttribute("src",this.textbox.value):(t=this.preview.ownerDocument.createElement("img"),t.setAttribute("src",this.textbox.value),this.preview.replaceChild(t,this.preview.firstChild))},i.prototype._matchImageURL=function(t){return/^https?:\/\/.+\.(jp?g|gif|png)$/.test(t)},i.prototype._normalizeURL=function(t){return/^https?:\/\//.test(t)||(t="http://"+t),t},i}(m),_.registerModule("image-tooltip",w),pn=w,pn}var dn,Ar;function uo(){if(Ar)return dn;Ar=1;var w,_,m,h,f;return m=At(),f=m.require("lodash"),h=m.require("dom"),w=m.require("delta"),_=function(){p.hotkeys={BOLD:{key:"B",metaKey:!0},INDENT:{key:h.KEYS.TAB},ITALIC:{key:"I",metaKey:!0},OUTDENT:{key:h.KEYS.TAB,shiftKey:!0},UNDERLINE:{key:"U",metaKey:!0}};function p(s,u){this.quill=s,this.hotkeys={},this._initListeners(),this._initHotkeys(),this._initDeletes()}return p.prototype.addHotkey=function(s,u){return f.isArray(s)||(s=[s]),f.each(s,function(i){return function(t){var n,a;return t=f.isObject(t)?f.clone(t):{key:t},t.callback=u,n=f.isNumber(t.key)?t.key:t.key.toUpperCase().charCodeAt(0),(a=i.hotkeys)[n]==null&&(a[n]=[]),i.hotkeys[n].push(t)}}(this))},p.prototype.toggleFormat=function(s,u){var i,t,n;if(s.isCollapsed()?i=this.quill.getContents(Math.max(0,s.start-1),s.end):i=this.quill.getContents(s),n=i.ops.length===0||!f.all(i.ops,function(a){var l;return(l=a.attributes)!=null?l[u]:void 0}),s.isCollapsed()?this.quill.prepareFormat(u,n):this.quill.formatText(s,u,n,"user"),t=this.quill.getModule("toolbar"),t!=null)return t.setActive(u,n)},p.prototype._initDeletes=function(){return this.addHotkey([h.KEYS.DELETE,h.KEYS.BACKSPACE],function(s){return function(){return s.quill.getLength()>1}}(this))},p.prototype._initHotkeys=function(){return this.addHotkey(p.hotkeys.INDENT,function(s){return function(u){return s._onTab(u,!1),!1}}(this)),this.addHotkey(p.hotkeys.OUTDENT,function(s){return function(u){return!1}}()),f.each(["bold","italic","underline"],function(s){return function(u){return s.addHotkey(p.hotkeys[u.toUpperCase()],function(i){return s.toggleFormat(i,u),!1})}}(this))},p.prototype._initListeners=function(){return h(this.quill.root).on("keydown",function(s){return function(u){var i;return i=!1,f.each(s.hotkeys[u.which],function(t){var n;if(n=h.isMac()?u.metaKey:u.metaKey||u.ctrlKey,!!t.metaKey==!!n&&!!t.shiftKey==!!u.shiftKey&&!!t.altKey==!!u.altKey)return i=t.callback(s.quill.getSelection())===!1||i,!0}),!i}}(this))},p.prototype._onTab=function(s,u){var i;return i=new w().retain(s.start).insert("	").delete(s.end-s.start).retain(this.quill.getLength()-s.end),this.quill.updateContents(i),this.quill.setSelection(s.start+1,s.start+1)},p}(),m.registerModule("keyboard",_),dn=_,dn}var gn,Sr;function lo(){if(Sr)return gn;Sr=1;var w,_,m,h,f,p={}.hasOwnProperty,s=function(u,i){for(var t in i)p.call(i,t)&&(u[t]=i[t]);function n(){this.constructor=u}return n.prototype=i.prototype,u.prototype=new n,u.__super__=i.prototype,u};return _=At(),m=xn(),f=_.require("lodash"),h=_.require("dom"),w=function(u){s(i,u),i.DEFAULTS={maxLength:50,styles:{".link-tooltip-container":{padding:"5px 10px"},".link-tooltip-container input.input":{width:"170px"},".link-tooltip-container input.input, .link-tooltip-container a.done, .link-tooltip-container.editing a.url, .link-tooltip-container.editing a.change":{display:"none"},".link-tooltip-container.editing input.input, .link-tooltip-container.editing a.done":{display:"inline-block"}},template:'<span class="title">Visit URL:&nbsp;</span> <a href="#" class="url" target="_blank" href="about:blank"></a> <input class="input" type="text"> <span>&nbsp;&#45;&nbsp;</span> <a href="javascript:;" class="change">Change</a> <a href="javascript:;" class="done">Done</a>'};function i(t,n){this.quill=t,this.options=n,this.options.styles=f.defaults(this.options.styles,m.DEFAULTS.styles),this.options=f.defaults(this.options,m.DEFAULTS),i.__super__.constructor.call(this,this.quill,this.options),h(this.container).addClass("link-tooltip-container"),this.textbox=this.container.querySelector(".input"),this.link=this.container.querySelector(".url"),this.initListeners()}return i.prototype.initListeners=function(){return this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(n){var a;if(n!=null&&n.isCollapsed())return a=t._findAnchor(n),a?(t.setMode(a.href,!1),t.show(a)):(t.range=null,t.hide())}}(this)),h(this.container.querySelector(".done")).on("click",f.bind(this.saveLink,this)),h(this.container.querySelector(".change")).on("click",function(t){return function(){return t.setMode(t.link.href,!0)}}(this)),this.initTextbox(this.textbox,this.saveLink,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(n){return n.initFormat("link",f.bind(t._onToolbar,t))}}(this))},i.prototype.saveLink=function(){var t,n;return n=this._normalizeURL(this.textbox.value),this.range!=null&&(this.range.isCollapsed()?(t=this._findAnchor(this.range),t!=null&&(t.href=n)):this.quill.formatText(this.range,"link",n,"user")),this.setMode(n,!1)},i.prototype.setMode=function(t,n){var a;return n==null&&(n=!1),n?(this.textbox.value=t,f.defer(function(l){return function(){return l.textbox.focus(),l.textbox.setSelectionRange(t.length,t.length)}}(this))):(this.link.href=t,a=t.length>this.options.maxLength?t.slice(0,this.options.maxLength)+"...":t,h(this.link).text(a)),h(this.container).toggleClass("editing",n)},i.prototype._findAnchor=function(t){var n,a,l;for(l=this.quill.editor.doc.findLeafAt(t.start,!0),n=l[0],l[1],n!=null&&(a=n.node);a!=null;){if(a.tagName==="A")return a;a=a.parentNode}return null},i.prototype._onToolbar=function(t,n){var a;if(t&&!t.isCollapsed())return n?(this.setMode(this._suggestURL(t),!0),a=this.quill.editor.selection._getNativeRange(),this.show(a)):this.quill.formatText(t,"link",!1,"user")},i.prototype._normalizeURL=function(t){return/^(https?:\/\/|mailto:)/.test(t)||(t="http://"+t),t},i.prototype._suggestURL=function(t){var n;return n=this.quill.getText(t),this._normalizeURL(n)},i}(m),_.registerModule("link-tooltip",w),gn=w,gn}var vn,Nr;function ao(){if(Nr)return vn;Nr=1;var w,_,m,h,f,p={}.hasOwnProperty,s=function(u,i){for(var t in i)p.call(i,t)&&(u[t]=i[t]);function n(){this.constructor=u}return n.prototype=i.prototype,u.prototype=new n,u.__super__=i.prototype,u};return m=At(),w=Pr().EventEmitter2,f=m.require("lodash"),h=m.require("dom"),_=function(u){s(i,u),i.DEFAULTS={template:'<span class="cursor-flag"> <span class="cursor-name"></span> </span> <span class="cursor-caret"></span>',timeout:2500},i.events={CURSOR_ADDED:"cursor-addded",CURSOR_MOVED:"cursor-moved",CURSOR_REMOVED:"cursor-removed"};function i(t,n){this.quill=t,this.options=n,this.cursors={},this.container=this.quill.addContainer("cursor-container",!0),this.quill.addStyles({".cursor-container":{position:"absolute",left:"0",top:"0","z-index":"1000"},".cursor":{"margin-left":"-1px",position:"absolute"},".cursor-flag":{bottom:"100%",position:"absolute","white-space":"nowrap"},".cursor-name":{display:"inline-block",color:"white",padding:"2px 8px"},".cursor-caret":{height:"100%",position:"absolute",width:"2px"},".cursor.hidden .cursor-flag":{display:"none"},".cursor.top > .cursor-flag":{bottom:"auto",top:"100%"},".cursor.right > .cursor-flag":{right:"-2px"}}),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,f.bind(this._applyDelta,this))}return i.prototype.clearCursors=function(){return f.each(f.keys(this.cursors),f.bind(this.removeCursor,this)),this.cursors={}},i.prototype.moveCursor=function(t,n){var a;return a=this.cursors[t],a.index=n,h(a.elem).removeClass("hidden"),clearTimeout(a.timer),a.timer=setTimeout(function(l){return function(){return h(a.elem).addClass("hidden"),a.timer=null}}(),this.options.timeout),this._updateCursor(a),a},i.prototype.removeCursor=function(t){var n;return n=this.cursors[t],this.emit(i.events.CURSOR_REMOVED,n),n!=null&&n.elem.parentNode.removeChild(n.elem),delete this.cursors[t]},i.prototype.setCursor=function(t,n,a,l){var o;return this.cursors[t]==null&&(this.cursors[t]=o={userId:t,index:n,color:l,elem:this._buildCursor(a,l)},this.emit(i.events.CURSOR_ADDED,o)),f.defer(function(g){return function(){return g.moveCursor(t,n)}}(this)),this.cursors[t]},i.prototype.shiftCursors=function(t,n,a){return a==null&&(a=null),f.each(this.cursors,function(l){return function(o,g){if(o&&(o.index>t||o.userId===a))return o.index+=Math.max(n,t-o.index)}}())},i.prototype.update=function(){return f.each(this.cursors,function(t){return function(n,a){if(n!=null)return t._updateCursor(n),!0}}(this))},i.prototype._applyDelta=function(t){var n;return n=0,f.each(t.ops,function(a){return function(l){var o,g;return o=0,l.insert!=null?(o=l.insert.length||1,a.shiftCursors(n,o,(g=l.attributes)!=null?g.author:void 0)):l.delete!=null?a.shiftCursors(n,-1*l.delete,null):l.retain!=null&&(a.shiftCursors(n,0,null),o=l.retain),n+=o}}(this)),this.update()},i.prototype._buildCursor=function(t,n){var a,l,o;return a=this.container.ownerDocument.createElement("span"),h(a).addClass("cursor"),a.innerHTML=this.options.template,a.querySelector(".cursor-flag"),o=a.querySelector(".cursor-name"),h(o).text(t),l=a.querySelector(".cursor-caret"),l.style.backgroundColor=o.style.backgroundColor=n,this.container.appendChild(a),a},i.prototype._moveCursor=function(t,n,a){var l,o,g;return a==null&&(a="left"),g=h(n).window(),l=n.getBoundingClientRect(),t.elem.style.top=l.top+g.pageYOffset+"px",t.elem.style.left=l[a]+"px",t.elem.style.height=l.height+"px",o=t.elem.querySelector(".cursor-flag"),h(t.elem).toggleClass("top",parseInt(t.elem.style.top)<=o.offsetHeight).toggleClass("left",parseInt(t.elem.style.left)<=o.offsetWidth).toggleClass("right",this.quill.root.offsetWidth-parseInt(t.elem.style.left)<=o.offsetWidth),this.emit(i.events.CURSOR_MOVED,t)},i.prototype._updateCursor=function(t){var n,a,l,o,g,y,T;return this.quill.editor.checkUpdate(),y=this.quill.editor.doc.findLeafAt(t.index,!0),l=y[0],o=y[1],a=this.container.ownerDocument.createElement("span"),l!=null?(T=h(l.node).split(o),T[0],g=T[1],n=T[2],h(a).text(h.ZERO_WIDTH_NOBREAK_SPACE),l.node.parentNode.insertBefore(a,g)):(h(a).text(h.NOBREAK_SPACE),this.quill.root.appendChild(a)),this._moveCursor(t,a),h(a).remove(),n&&h(l.node.parentNode).normalize(),this.quill.editor.selection.update(m.sources.SILENT)},i}(w),m.registerModule("multi-cursor",_),vn=_,vn}var mn,qr;function fo(){if(qr)return mn;qr=1;var w,_,m,h,f,p;return h=At(),_=Br(),p=h.require("lodash"),f=h.require("dom"),w=h.require("delta"),m=function(){function s(u,i){this.quill=u,this.options=i,this.container=this.quill.addContainer("paste-container"),this.container.setAttribute("contenteditable",!0),this.quill.addStyles({".paste-container":{left:"-10000px",position:"absolute",top:"50%"}}),f(this.quill.root).on("paste",p.bind(this._paste,this))}return s.prototype._paste=function(){var u,i,t,n,a;if(this.quill.getLength(),t=this.quill.getSelection(),t!=null)return this.container.innerHTML="",u=f(this.quill.root).window(),i=u.scrollY,n=window.scrollX,a=window.scrollY,this.container.focus(),p.defer(function(l){return function(){var o,g,y,T,x,S;return g=new _(l.container,l.quill.options),o=g.toDelta(),y=o.length()-1,o.compose(new w().retain(y).delete(1)),t.start>0&&o.ops.unshift({retain:t.start}),o.delete(t.end-t.start),l.quill.updateContents(o,"user"),l.quill.setSelection(t.start+y,t.start+y),S=l.quill.editor.doc.findLineAt(t.start+y),T=S[0],S[1],x=T.node.offsetTop+T.node.offsetHeight,x>i+l.quill.root.offsetHeight&&(i=T.node.offsetTop-l.quill.root.offsetHeight/2),u.scrollTo(0,i),window.scrollTo(n,a)}}(this))},s}(),h.registerModule("paste-manager",m),mn=m,mn}var yn,Dr;function ho(){if(Dr)return yn;Dr=1;var w,_,m,h;return w=At(),h=w.require("lodash"),m=w.require("dom"),_=function(){f.DEFAULTS={container:null},f.formats={LINE:{align:"align",bullet:"bullet",list:"list"},SELECT:{align:"align",background:"background",color:"color",font:"font",size:"size"},TOGGLE:{bold:"bold",bullet:"bullet",image:"image",italic:"italic",link:"link",list:"list",strike:"strike",underline:"underline"},TOOLTIP:{image:"image",link:"link"}};function f(p,s){if(this.quill=p,this.options=s,this.options.container==null)throw new Error("container required for toolbar",this.options);this.container=h.isString(this.options.container)?document.querySelector(this.options.container):this.options.container,this.inputs={},this.preventUpdate=!1,this.triggering=!1,h.each(this.quill.options.formats,function(u){return function(i){if(f.formats.TOOLTIP[i]==null)return u.initFormat(i,function(t,n){if(!u.triggering)return t.isCollapsed()?u.quill.prepareFormat(i,n):f.formats.LINE[i]!=null?u.quill.formatLine(t,i,n,"user"):u.quill.formatText(t,i,n,"user"),h.defer(function(){return u.updateActive(t,["bullet","list"]),u.setActive(i,n)})})}}(this)),this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(u){return function(i){if(i!=null)return u.updateActive(i)}}(this)),this.quill.onModuleLoad("keyboard",function(u){return function(i){return i.addHotkey([m.KEYS.BACKSPACE,m.KEYS.DELETE,m.KEYS.ENTER],function(){return h.defer(h.bind(u.updateActive,u))})}}(this)),m(this.container).addClass("ql-toolbar-container"),m.isIOS()&&m(this.container).addClass("ios"),m.isIE(11)&&m(this.container).on("mousedown",function(u){return function(){return!1}}())}return f.prototype.initFormat=function(p,s){var u,i,t;if(t=".ql-"+p,f.formats.SELECT[p]!=null?(t="select"+t,u="change"):u="click",i=this.container.querySelector(t),i!=null)return this.inputs[p]=i,m(i).on(u,function(n){return function(){var a,l;return l=u==="change"?m(i).value():!m(i).hasClass("ql-active"),n.preventUpdate=!0,n.quill.focus(),a=n.quill.getSelection(),a!=null&&s(a,l),n.preventUpdate=!1,!0}}(this))},f.prototype.setActive=function(p,s){var u,i,t,n;if(i=this.inputs[p],i!=null)return u=m(i),i.tagName==="SELECT"?(this.triggering=!0,t=u.value(i),s==null&&(s=(n=u.default())!=null?n.value:void 0),h.isArray(s)&&(s=""),s!==t&&(s!=null?u.option(s,!1):u.reset(!1)),this.triggering=!1):u.toggleClass("ql-active",s||!1)},f.prototype.updateActive=function(p,s){var u;if(s==null&&(s=null),p||(p=this.quill.getSelection()),p!=null&&!this.preventUpdate)return u=this._getActive(p),h.each(this.inputs,function(i){return function(t,n){return(!h.isArray(s)||s.indexOf(n)>-1)&&i.setActive(n,u[n]),!0}}(this))},f.prototype._getActive=function(p){var s,u;return s=this._getLeafActive(p),u=this._getLineActive(p),h.defaults({},s,u)},f.prototype._getLeafActive=function(p){var s,u,i,t;return p.isCollapsed()?(t=this.quill.editor.doc.findLineAt(p.start),t[0],i=t[1],i===0?s=this.quill.getContents(p.start,p.end+1):s=this.quill.getContents(p.start-1,p.end)):s=this.quill.getContents(p),u=h.map(s.ops,"attributes"),this._intersectFormats(u)},f.prototype._getLineActive=function(p){var s,u,i,t,n;for(u=[],t=this.quill.editor.doc.findLineAt(p.start),s=t[0],t[1],n=this.quill.editor.doc.findLineAt(p.end),i=n[0],n[1],i!=null&&i===s&&(i=i.next);s!=null&&s!==i;)u.push(h.clone(s.formats)),s=s.next;return this._intersectFormats(u)},f.prototype._intersectFormats=function(p){return h.reduce(p.slice(1),function(s,u){var i,t,n,a,l;return i=h.keys(s),n=h.keys(u),a=h.intersection(i,n),l=h.difference(i,n),t=h.difference(n,i),h.each(a,function(o){if(f.formats.SELECT[o]!=null){if(h.isArray(s[o])){if(h.indexOf(s[o],u[o])<0)return s[o].push(u[o])}else if(s[o]!==u[o])return s[o]=[s[o],u[o]]}}),h.each(l,function(o){if(f.formats.TOGGLE[o]!=null)return delete s[o];if(f.formats.SELECT[o]!=null&&!h.isArray(s[o]))return s[o]=[s[o]]}),h.each(t,function(o){if(f.formats.SELECT[o]!=null)return s[o]=[u[o]]}),s},p[0]||{})},f}(),w.registerModule("toolbar",_),yn=_,yn}var _n,Ir;function co(){if(Ir)return _n;Ir=1;var w,_,m;return w=At(),m=w.require("lodash"),w.require("delta"),_=function(){h.DEFAULTS={delay:1e3,maxStack:100},h.hotkeys={UNDO:{key:"Z",metaKey:!0},REDO:{key:"Z",metaKey:!0,shiftKey:!0}};function h(f,p){this.quill=f,this.options=p??{},this.lastRecorded=0,this.emittedDelta=null,this.clear(),this.initListeners()}return h.prototype.initListeners=function(){return this.quill.onModuleLoad("keyboard",function(f){return function(p){return p.addHotkey(h.hotkeys.UNDO,function(){return f.undo(),!1}),p.addHotkey(h.hotkeys.REDO,function(){return f.redo(),!1})}}(this)),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(f){return function(p,s){if(!m.isEqual(p,f.emittedDelta))return f.record(p,f.oldDelta),f.oldDelta=f.quill.getContents()}}(this))},h.prototype.clear=function(){return this.stack={undo:[],redo:[]},this.oldDelta=this.quill.getContents()},h.prototype.record=function(f,p){var s,u,i;if(f.ops.length>0){this.stack.redo=[];try{if(i=this.quill.getContents().diff(this.oldDelta),u=new Date().getTime(),this.lastRecorded+this.options.delay>u&&this.stack.undo.length>0?(s=this.stack.undo.pop(),i=i.compose(s.undo),f=s.redo.compose(f)):this.lastRecorded=u,this.stack.undo.push({redo:f,undo:i}),this.stack.undo.length>this.options.maxStack)return this.stack.undo.unshift()}catch{return this.clear()}}},h.prototype.redo=function(){return this._change("redo","undo")},h.prototype.undo=function(){return this._change("undo","redo")},h.prototype._getLastChangeIndex=function(f){var p,s;return s=0,p=0,f.ops.forEach(function(u){if(u.insert!=null)return s=Math.max(p+(u.insert.length||1),s);if(u.delete!=null)return s=Math.max(p,s);if(u.retain!=null)return u.attributes!=null&&(s=Math.max(p+u.retain,s)),p+=u.retain}),s},h.prototype._change=function(f,p){var s,u;if(this.stack[f].length>0)return s=this.stack[f].pop(),this.lastRecorded=0,this.emittedDelta=s[f],this.quill.updateContents(s[f],"user"),this.emittedDelta=null,u=this._getLastChangeIndex(s[f]),this.quill.setSelection(u,u),this.oldDelta=this.quill.getContents(),this.stack[p].push(s)},h}(),w.registerModule("undo-manager",_),_n=_,_n}var bn,Rr;function po(){return Rr||(Rr=1,so(),oo(),uo(),lo(),ao(),fo(),ho(),xn(),co(),bn=At()),bn}var En,Or;function go(){return Or||(Or=1,En=po()),En}(function(w,_){(function(h,f){w.exports=f(Is,go())})(ye,function(m,h){return function(f){var p={};function s(u){if(p[u])return p[u].exports;var i=p[u]={exports:{},id:u,loaded:!1};return f[u].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}return s.m=f,s.c=p,s.p="",s(0)}([function(f,p,s){f.exports=s(1),f.exports.Mixin=s(2),f.exports.Toolbar=s(3)},function(f,p,s){var u=s(4),i=s(3),t=s(2),n=u.PropTypes;u.createFactory&&(i=u.createFactory(i));var a=u.createClass({displayName:"Quill",mixins:[t],propTypes:{id:n.string,className:n.string,value:n.string,defaultValue:n.string,readOnly:n.bool,toolbar:n.object,formats:n.array,styles:n.object,theme:n.string,pollInterval:n.number,onChange:n.func},getDefaultProps:function(){return{className:"",modules:{}}},getInitialState:function(){return{}},componentWillReceiveProps:function(l){"value"in l&&l.value!==this.props.value&&this.setEditorContents(this.state.editor,l.value)},componentDidMount:function(){var l=this.createEditor(this.getEditorElement(),this.getEditorConfig());this.setState({editor:l})},componentWillUnmount:function(){this.destroyEditor(this.state.editor)},shouldComponentUpdate:function(l,o){return!1},componentWillUpdate:function(){this.componentWillUnmount()},componentDidUpdate:function(){this.componentDidMount()},getEditorConfig:function(){var l={readOnly:this.props.readOnly,theme:this.props.theme,formats:this.props.formats,styles:this.props.styles,modules:this.props.modules,pollInterval:this.props.pollInterval};return l.modules.toolbar||(l.modules=JSON.parse(JSON.stringify(l.modules)),l.modules.toolbar={container:this.refs.toolbar.getDOMNode()}),l},getEditorElement:function(){return this.refs.editor.getDOMNode()},getEditorContents:function(){return this.props.value||this.props.defaultValue},getClassName:function(){return["quill",this.props.className].join(" ")},renderContents:function(){return u.Children.count(this.props.children)>0?u.Children.only(this.props.children):[i({key:"toolbar",ref:"toolbar",items:this.props.toolbar}),u.DOM.div({key:"editor",ref:"editor",className:"quill-contents",dangerouslySetInnerHTML:{__html:this.getEditorContents()}})]},render:function(){return u.DOM.div({className:this.getClassName(),onChange:this.preventDefault},this.renderContents())},onEditorChange:function(l){l!==this.state.value&&this.props.onChange&&this.props.onChange(l)},preventDefault:function(l){l.preventDefault(),l.stopPropagation()}});f.exports=a},function(f,p,s){var u=s(4),i=s(5);u.PropTypes;var t={createEditor:function(n,a){var l=new i(n,a);return this.hookEditor(l),l},hookEditor:function(n){var a=this;n.on("text-change",function(l,o){a.onEditorChange&&a.onEditorChange(n.getHTML(),l,o)})},updateEditor:function(n,a){throw new Error("Not implemented")},destroyEditor:function(n){n.removeAllListeners()},setEditorContents:function(n,a){var l=n.getSelection();n.setHTML(a),n.setSelection(l)}};f.exports=t},function(f,p,s){var u=s(4),i=u.PropTypes,t=[{label:"Formats",type:"group",items:[{label:"Size",type:"size",items:[{label:"Normal",value:""},{label:"Smaller",value:"0.8em"},{label:"Larger",value:"1.4em"},{label:"Huge",value:"2em"}]},{label:"Alignment",type:"align",items:[{label:"Center",value:"center"},{label:"Left",value:"left"},{label:"Right",value:"right"},{label:"Justify",value:"justify"}]}]},{label:"Text",type:"group",items:[{type:"bold",label:"Bold"},{type:"italic",label:"Italic"},{type:"strike",label:"Strike"},{type:"underline",label:"Underline"},{type:"link",label:"Link"}]},{label:"Blocks",type:"group",items:[{type:"bullet",label:"Bullet"},{type:"list",label:"List"}]}],n=u.createClass({displayName:"Quill Toolbar",propTypes:{id:i.string,className:i.string,items:i.array},getDefaultProps:function(){return{items:t}},renderGroup:function(a){return u.DOM.span({key:a.label,className:"ql-format-group"},a.items.map(this.renderItem))},renderChoiceItem:function(a){return u.DOM.option({key:a.label||a.value,value:a.value},a.label)},renderChoices:function(a){return u.DOM.select({key:a.label,className:"ql-"+a.type},a.items.map(this.renderChoiceItem))},renderAction:function(a){return u.DOM.span({key:a.label||a.value,className:"ql-format-button ql-"+a.type,title:a.label})},renderItem:function(a){var l={group:this.renderGroup,align:this.renderChoices,size:this.renderChoices,action:this.renderAction},o=l[a.type]||l.action;return o(a)},getClassName:function(){return"quill-toolbar "+(this.props.className||"")},render:function(){return u.DOM.div({className:this.getClassName()},this.props.items.map(this.renderItem))}});f.exports=n},function(f,p,s){f.exports=m},function(f,p,s){f.exports=h}])})})(Mr);var vo=Mr.exports;const yo=Rs(vo);export{yo as R};
